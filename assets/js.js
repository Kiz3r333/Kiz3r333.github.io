var power = 99;
var visualPower = document.getElementById("power");
var door1 = document.getElementById("door1");
var door2 = document.getElementById("door2");
var camera = document.getElementById("camera");
var office = document.getElementById("office");
var officemovetrigger1 = document.getElementById("officemovetrigger1");
var officemovetrigger11 = document.getElementById("officemovetrigger11");
var officemovetrigger111 = document.getElementById("officemovetrigger111");
var officemovetrigger2 = document.getElementById("officemovetrigger2");
var officemovetrigger22 = document.getElementById("officemovetrigger22");
var officemovetrigger222 = document.getElementById("officemovetrigger222");
var camerabg = document.getElementById("camerabg");
var leftbutton = document.getElementById("leftbutton");
var leftlight = document.getElementById("leftlight");
var rightbutton = document.getElementById("rightbutton");
var rightlight = document.getElementById("rightlight");
var buttontrigger1 = document.getElementById("buttontrigger1");
var lighttrigger1 = document.getElementById("lighttrigger1");
var buttontrigger2 = document.getElementById("buttontrigger2");
var lighttrigger2 = document.getElementById("lighttrigger2");
var freddyboop = document.getElementById("freddyboop");
var light1 = document.getElementById("light1");
var light2 = document.getElementById("light2");
var leftdoor = document.getElementById("leftdoor");
var rightdoor = document.getElementById("rightdoor");
var officelights1 = document.getElementById("officelights1");
var officelights2 = document.getElementById("officelights2");
var officebg = document.getElementById("officebg");
var cameratrigger = document.getElementById("cameratrigger");
var cam = document.getElementById("cam");
var static = document.getElementById("static");
var camerassets = document.getElementById("camerassets");
var cameras = document.getElementById("cameras");
var camtxt = document.getElementById("camtxt");
var amtime = document.getElementById("amtime");
var select = document.getElementById("select");
var continuenight = document.getElementById("continuenight");
var menu = document.getElementById("menu");
var game = document.getElementById("game");
var warning = document.getElementById("warning");
var lines = document.getElementsByClassName("lines");
var tvstatic = document.getElementById("tvstatic");
var newgame = document.getElementById("newgame");
var continuemenu = document.getElementById("continue");
var loadscreen = document.getElementById("loadscreen");
var menutime = document.getElementById("menutime");
var menunight = document.getElementById("menunight");
var survived6div = document.getElementById("survived6div");
var survived5 = document.getElementById("survived5");
var survived6 = document.getElementById("survived6");
var milktext1 = document.getElementById("milktext1");
var milktext2 = document.getElementById("milktext2");
var usage2 = document.getElementById("usage2");
var usage3 = document.getElementById("usage3");
var usage4 = document.getElementById("usage4");
var txtUI = document.getElementById("UI");
var camchar = document.getElementById("camchar");
var character1 = document.getElementById("character1");
var character2 = document.getElementById("character2");
var character3 = document.getElementById("character3");
var pizzabtn = document.getElementById("pizzabtn");
var brokenoverlay = document.getElementById("brokenoverlay");
var owo = document.getElementById("owo");
var jumpscare = document.getElementById("jumpscare");
var lampleft = document.getElementById("lampleft");
var lampright = document.getElementById("lampright");
var slug = document.getElementById("slug");
var ryanoffice = document.getElementById("ryanoffice");
var camerabutton = document.getElementById("camerabutton");
var myVideo = document.getElementById("myVideo");
var fire = document.getElementById("fire");
var starpng = document.getElementById("starpng");
var starnumber = document.getElementById("starnumber");
var exacttime = document.getElementById("exacttime");
var skipintro = document.getElementById("skipintro");
var mutecall = document.getElementById("mutecall");
var leftnightbtn = document.getElementById("leftnightbtn");
var rightnightbtn = document.getElementById("rightnightbtn");
var loadprogress = document.getElementById("loadprogress");
var continuetime = document.getElementById("continuetime");
var timescore = document.getElementById("timescore");
var crnttime = document.getElementById("crnttime");
var prevtime = document.getElementById("prevtime");
var crnttimedesc = document.getElementById("crnttimedesc");
var prevtimedesc = document.getElementById("prevtimedesc");
var menucharacter2 = document.getElementById("menucharacter2");
var options = document.getElementById("options");
var title = document.getElementById("title");
var optionscontents = document.getElementById("optionscontents");
var audiopercent = document.getElementById("audiopercent");
var audioslider = document.getElementById("audioslider");
var extras = document.getElementById("extras");
var extrascontents = document.getElementById("extrascontents");
var extrasdevmenu = document.getElementById("extrasdevmenu");
var leftextrasbtn = document.getElementById("leftextrasbtn");
var rightextrasbtn = document.getElementById("rightextrasbtn");
var devvidsource = document.getElementById("devvidsource");
var devvid = document.getElementById("devvid");
var devimg = document.getElementById("devimg");
var devdescription = document.getElementById("devdescription");
var extrascreditsmenu = document.getElementById("extrascreditsmenu");
var extrascheatsmenu = document.getElementById("extrascheatsmenu");
var mirrorcheckbox = document.getElementById("mirrorcheckbox");
var flashlightcheckbox = document.getElementById("flashlightcheckbox");
var powercheckbox = document.getElementById("powercheckbox");
var radarcheckbox = document.getElementById("radarcheckbox");
var flashlight = document.getElementById("flashlight");
var continueflash = document.getElementById("continueflash");
var continuemirror = document.getElementById("continuemirror");
var continuewarning = document.getElementById("continuewarning");
var continuewarningmsg = document.getElementById("continuewarningmsg");
var radarassets = document.getElementById("radarassets");
var radarryan = document.getElementById("radarryan");
var radarjoey = document.getElementById("radarjoey");
var radarkizzy = document.getElementById("radarkizzy");
var extraslock = document.getElementById("extraslock");
var extraslockmsg = document.getElementById("extraslockmsg");
var extraschallengemenu = document.getElementById("extraschallengemenu");
var extrasmilklockmsg = document.getElementById("extrasmilklockmsg");
var blindcheckbox = document.getElementById("blindcheckbox");
var starpng1 = document.getElementById("starpng1");
var starpng2 = document.getElementById("starpng2");
var starpng3 = document.getElementById("starpng3");
var starnumber1 = document.getElementById("starnumber1");
var starnumber2 = document.getElementById("starnumber2");
var starnumber3 = document.getElementById("starnumber3");
var menutitlemode = document.getElementById("menutitlemode");
var cammilk = document.getElementById("cammilk");
var map = document.getElementById("map");
var milkbtn1 = document.getElementById("milkbtn1");
var milkbtn2 = document.getElementById("milkbtn2");
var milkbtn3 = document.getElementById("milkbtn3");
var milkbtn4 = document.getElementById("milkbtn4");
var led = document.getElementById("led");
var radarimg = document.getElementById("radarimg");
var shockbtn1 = document.getElementById("shockbtn1");
var shockbtn2 = document.getElementById("shockbtn2");
var officedistance = -25;
var cameradistance = -25;
var intervalId = null;
var intervalcam = null;
var cameradelay = 10;
var doordelay = 10;
var cameramovedelay = 100;
var currentcam = "1b";
var currenttime = 0;
var blink=false;
var currentnight=1;
var tickinterval = null;
var blinkinterval = null;
var pizzainterval = null;
var glowinterval = null;
var timerinterval = null;
var usagenum=1;
var character1cam="1b";
var character2cam="1b";
var character3cam="5";
var windnumb=100;
var owotoggle=false;
var pizzadelay = 10;
var kitchendelay = false;
var lightbreakleft = 10;
var lightbreakright = 10;
var officerepeatsrc=true;
var timeoutID;
var kizdeathtoggle=false;
var deathdelay=false;
var votest=false;
var windowleft=false;
var windowright=false;
var pressbool=false;
const timeouts = [];
var nighthighscore=1;
var forceowo=false;
var miliseconds = 0;
var kizstate = 0;
var camtime = 0;
var doorConsumption = 0.02;
var cameraConsumption = 0.02;
var lightConsumption = 0.01;
var windingbool = false;
var cookieName = "timernight" + currentnight;
var cookieNameMirror = "cookieMirror" + currentnight;
var cookieNameFlash = "cookieFlash" + currentnight;
var currentdevimg = 1;
var cheated=false;
var powercheat=false;
var flashlighton=true;
var challenge=0;
var currentnightch1=1;
var currentnightch2=1;
var currentnightch3=1;
var nighthighscorech1=1;
var nighthighscorech2=1;
var nighthighscorech3=1;
var ledcolor="red";
var timeout28;
var timeout29;
var timeout34;
var timeout35;
var timeout36;
var timeout32;
var timeout33;

function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(";").shift();
}

currentnight = getCookie("currentnight");
nighthighscore = getCookie("nighthighscore");
currentnightch1 = getCookie("currentnightch1");
nighthighscorech1 = getCookie("nighthighscorech1");
currentnightch2 = getCookie("currentnightch2");
nighthighscorech2 = getCookie("nighthighscorech2");
currentnightch3 = getCookie("currentnightch3");
nighthighscorech3 = getCookie("nighthighscorech3");

const variablesToCheck = [
    { variable: 'currentnight', defaultValue: 1 },
    { variable: 'nighthighscore', defaultValue: 1 },
    { variable: 'currentnightch1', defaultValue: 1 },
    { variable: 'nighthighscorech1', defaultValue: 1 },
    { variable: 'currentnightch2', defaultValue: 1 },
    { variable: 'nighthighscorech2', defaultValue: 1 },
    { variable: 'currentnightch3', defaultValue: 1 },
    { variable: 'nighthighscorech3', defaultValue: 1 }
];

variablesToCheck.forEach(item => {
    if (window[item.variable] === undefined || window[item.variable] == "undefined") {
        window[item.variable] = item.defaultValue;
    }
});

document.addEventListener('contextmenu', event => event.preventDefault());

var mediaFiles = [];
var loadma = false;

function preloadMedia(url, type, callback) {
    var media;

    if (type === 'image') {
        media = new Image();
    } else if (type === 'audio') {
        media = new Audio();
        media.addEventListener('loadedmetadata', callback);
    }

    media.src = url;
    media.onload = callback;
    return media;
}

function preloadMediaList(mediaList, onComplete) {
    var loadedMedia = 0;
    var totalMedia = mediaList.length;

    function mediaLoaded() {
        loadedMedia++;
        loadprogress.innerHTML=loadedMedia + " assets loaded out of " + totalMedia;
        if (loadedMedia === totalMedia) {
            onComplete();
        }
    }

    for (var i = 0; i < totalMedia; i++) {
        var url = mediaList[i][0];
        var type = mediaList[i][1];
        preloadMedia(url, type, mediaLoaded);
    }
}

function preload() {
    var mediaList = [
        ["img/camera/static.gif", "image"],
		["img/menu/FNaFFreddy_Menu.gif", "image"],
		["sfx/darkness_music.wav", "audio"],
		["sfx/static.wav", "audio"],
		["img/menu/Loading_Clock_1.png", "image"],
		["img/menu/skipintro.png", "image"],
		["img/menu/boykisscomputer.gif", "image"],
		["img/menu/nightbtn.png", "image"],
    	["img/background/office.png", "image"],
    	["img/background/office2.png", "image"],
    	["img/background/officelightsleft.png", "image"],
    	["img/background/officelightsright.png", "image"],
    	["img/buttons/Door_Lclose.gif", "image"],
    	["img/buttons/Door_Lopen.gif", "image"],
    	["img/buttons/Door_Rclose.gif", "image"],
    	["img/buttons/Door_Ropen.gif", "image"],
    	["img/buttons/Leftbutton.png", "image"],
    	["img/buttons/Leftbuttonon.png", "image"],
    	["img/buttons/Leftlight.png", "image"],
    	["img/buttons/Leftlighton.png", "image"],
    	["img/buttons/rightbutton.png", "image"],
    	["img/buttons/rightbuttonon.png", "image"],
    	["img/buttons/rightlight.png", "image"],
    	["img/buttons/rightlighton.png", "image"],
		["img/camera/Cam_01b_text.png", "image"],
		["img/camera/Cam_01c_text.png", "image"],
		["img/camera/Cam_05_text.png", "image"],
		["img/camera/Cam_06_text.png", "image"],
		["img/camera/CAM1B.png", "image"],
		["img/camera/CAM1C.png", "image"],
		["img/camera/CAM5.png", "image"],
		["img/camera/CAM6.png", "image"],
		["img/camera/CAMMILK.png", "image"],
		["img/camera/Cam_mlk_text.png", "image"],
		["img/camera/map.png", "image"],
		["img/camera/mapmilk.png", "image"],
		["img/monitorclose.gif", "image"],
		["img/monitoropen.gif", "image"],
		["img/camera/box_frame_1.png", "image"],
		["img/camera/box_frame_2.png", "image"],
		["img/camera/box_frame_3.png", "image"],
		["img/camera/box_frame_4.png", "image"],
		["img/camera/box_frame_5.png", "image"],
		["img/camera/graphicscrate-broken-glass-13_prev_lg.png", "image"],
		["img/camera/pizzabtn.png", "image"],
		["img/camera/pizzabtnon.png", "image"],
		["img/camera/ryan_camPose.gif", "image"],
		["img/camera/joey_camPose.gif", "image"],
		["img/background/OwO.png", "image"],
		["img/buttons/camerabutton.png", "image"],
		["img/background/joeyjump.gif", "image"],
		["img/background/kizjump.gif", "image"],
		["img/background/ryanjump.gif", "image"],
		["img/camera/slug.gif", "image"],
		["img/background/fire.gif", "image"],
		["img/menu/star.png", "image"],
		["img/buttons/mutecall.png", "image"],
		["img/menu/boykisszaza.gif", "image"],
		["img/menu/boykissthigh.gif", "image"],
		["img/menu/boykissphone.gif", "image"],
		["img/menu/mirror.png", "image"],
		["img/menu/flash.png", "image"],
		["img/menu/warning.png", "image"],
		["img/camera/radar.png", "image"],
		["img/camera/radarmilk.png", "image"],
		["img/menu/lock.png", "image"],
		["img/camera/shockbtn.png", "image"],
		["img/camera/shockbtnon.png", "image"],
		["sfx/BallastHumMedium2.wav", "audio"],
		["sfx/MiniDV_Tape_Eject_1.wav", "audio"],
		["sfx/CAMERA_VIDEO_LOA_60105303.wav", "audio"],
		["sfx/Buzz_Fan_Florescent2.wav", "audio"],
		["sfx/put down.wav", "audio"],
		["sfx/blip3.wav", "audio"],
		["sfx/SFXBible_12478.wav", "audio"],
		["sfx/ambience2.wav", "audio"],
		["sfx/CROWD_SMALL_CHIL_EC049202.wav", "audio"],
		["sfx/powerdown.wav", "audio"],
		["sfx/CrumblingDreams.wav", "audio"],
		["sfx/EerieAmbienceLargeSca_MV005.wav", "audio"],
		["sfx/chimes 2.wav", "audio"],
		["sfx/jackinthebox.wav", "audio"],
		["sfx/windup2.wav", "audio"],
		["sfx/error.wav", "audio"],
		["sfx/break.wav", "audio"],
		["sfx/changebulb.wav", "audio"],
		["sfx/enter.wav", "audio"],
		["sfx/fall.wav", "audio"],
		["sfx/1VO.wav", "audio"],
		["sfx/2VO.wav", "audio"],
		["sfx/3VO.wav", "audio"],
		["sfx/4VO.wav", "audio"],
		["sfx/5VO.wav", "audio"],
		["sfx/6VO.wav", "audio"],
		["sfx/7VO.wav", "audio"],
		["sfx/8VO.wav", "audio"],
		["sfx/goop.wav", "audio"],
		["sfx/goop2.wav", "audio"],
		["sfx/squeak.wav", "audio"],
		["sfx/fire.wav", "audio"],
		["sfx/windowscare.wav", "audio"],
		["sfx/ariamath.wav", "audio"],
		["sfx/chipi.wav", "audio"],
		["sfx/chapa.wav", "audio"],
		["sfx/dubi.wav", "audio"],
		["sfx/daba.wav", "audio"],
		["sfx/magico.wav", "audio"],
		["sfx/duby.wav", "audio"],
		["sfx/boom.wav", "audio"],
		["sfx/Flashlight_Off.wav", "audio"],
		["sfx/Flashlight_On.wav", "audio"],
		["sfx/ding.wav", "audio"],
		["sfx/gen.wav", "audio"],
		["sfx/genstart.wav", "audio"],
		["sfx/genend.wav", "audio"],
		["sfx/mlkbtn.wav", "audio"],
		["sfx/mlkerror.wav", "audio"],
		["sfx/shock.wav", "audio"],
		["sfx/shockfail.wav", "audio"]
    ];

    preloadMediaList(mediaList, function () {
        loadma = true;
    });
}

preload();

function cameraopenw(){
	if (cameradelay==10) {
		cameradelay=0;
		if (light1.checked || light2.checked) {
			usagenum--;
		}
		light1.checked = false;
		light2.checked = false;
		leftlight.src="img/buttons/Leftlight.png";
		rightlight.src="img/buttons/rightlight.png";
		officelights1.style.display="none";
		officelights2.style.display="none";
		camerabg.style.visibility="visible";
		ryanoffice.style.visibility="hidden";
		joeyoffice.style.visibility="hidden";
		if (camera.checked==false) {
			usagenum++;
			changeVolume("BallastHumMedium2",0);
			playSound("MiniDV_Tape_Eject_1",true);
			playSound("CAMERA_VIDEO_LOA_60105303",false);
			changeVolume("Buzz_Fan_Florescent2",0.1);
			changeVolume("EerieAmbienceLargeSca_MV005",0.5);
			camerabg.src="img/monitoropen.gif";
			officemovetrigger1.style.display="block";
			officemovetrigger11.style.display="block";
			officemovetrigger111.style.display="block";
			officemovetrigger2.style.display="block";
			officemovetrigger22.style.display="block";
			officemovetrigger222.style.display="block";
			freddyboop.style.display="none";
			buttontrigger1.style.display="none";
			lighttrigger1.style.display="none";
			buttontrigger2.style.display="none";
			lighttrigger2.style.display="none";
			slug.style.display="none";
			setTimeout(() => {
				static.style.removeProperty('transition');
				static.style.opacity="70%";
				camera.checked = true;
				camerassets.style.display="block";
				cam.style.visibility="visible";
				for(i = 0; i < lines.length; i++) {
  				  lines[i].style.visibility="visible";
  				}
  				if (currentcam==character1cam && currentcam!="6") {
					character1.style.visibility="visible";
				}else{
					character1.style.visibility="hidden";
					if (currentcam=="6") {
						changeVolume("OVEN-DRA_1_GEN-HDF18119",1);
						changeVolume("OVEN-DRA_2_GEN-HDF18120",1);
						changeVolume("OVEN-DRA_7_GEN-HDF18121",1);
						changeVolume("OVEN-DRAWE_GEN-HDF18122",1);
					}else{
						changeVolume("OVEN-DRA_1_GEN-HDF18119",0.01);
						changeVolume("OVEN-DRA_2_GEN-HDF18120",0.01);
						changeVolume("OVEN-DRA_7_GEN-HDF18121",0.01);
						changeVolume("OVEN-DRAWE_GEN-HDF18122",0.01);
					}
				}
				if (currentcam==character2cam && currentcam!="6") {
					character2.style.visibility="visible";
				}else{
					character2.style.visibility="hidden";
					if (currentcam=="6") {
						changeVolume("OVEN-DRA_1_GEN-HDF18119",1);
						changeVolume("OVEN-DRA_2_GEN-HDF18120",1);
						changeVolume("OVEN-DRA_7_GEN-HDF18121",1);
						changeVolume("OVEN-DRAWE_GEN-HDF18122",1);
					}else{
						changeVolume("OVEN-DRA_1_GEN-HDF18119",0.01);
						changeVolume("OVEN-DRA_2_GEN-HDF18120",0.01);
						changeVolume("OVEN-DRA_7_GEN-HDF18121",0.01);
						changeVolume("OVEN-DRAWE_GEN-HDF18122",0.01);
					}
				}
				if (currentcam=="milk" && camera.checked==true) {
					changeVolume("gen",1);
					changeVolume("genstart",1);
					changeVolume("genend",1);
				}else{
					changeVolume("gen",0.01);
					changeVolume("genstart",0.01);
					changeVolume("genend",0.01);
				}
				if (windnumb<=-1000 && currentcam=="1c") {
					slug.style.display="block";
					cameratrigger.style.display="none";
					camerabutton.style.display="none";
					setTimeout(() => {
						slug.style.left="108%";
						slug.style.top="48%";
					}, "500");
					setTimeout(() => {
						kizzydeath();
					}, "2500");
				}
				if (currentcam==character3cam && camera.checked==true) {
					character3.style.visibility="visible";
					pizzabtn.style.display="block";
					changeVolume("CrumblingDreams",0.8);
					changeVolume("EerieAmbienceLargeSca_MV005",0.01);
				}else{
					character3.style.visibility="hidden";
					pizzabtn.style.display="hidden";
					changeVolume("CrumblingDreams",0.01);
					changeVolume("EerieAmbienceLargeSca_MV005",0.5);
				}
				if (currentcam=="1c") {
					brokenoverlay.style.display="block";
				}else{
					brokenoverlay.style.display="none";
				}

				if (currentcam=="milk") {
					const styles = ["8%", "20%", "32%", "44%"];

					for (let i = styles.length - 1; i > 0; i--) {
					  const j = Math.floor(Math.random() * (i + 1));
					  [styles[i], styles[j]] = [styles[j], styles[i]];
					}

					milkbtn1.style.left=styles[0];
					milkbtn2.style.left=styles[1];
					milkbtn3.style.left=styles[2];
					milkbtn4.style.left=styles[3];

					milkbtn1.style.display="block";
					milkbtn2.style.display="block";
					milkbtn3.style.display="block";
					milkbtn4.style.display="block";
					led.style.display="block";
					shockbtn1.style.display="block";
					shockbtn2.style.display="block";
				}else{
					milkbtn1.style.display="none";
					milkbtn2.style.display="none";
					milkbtn3.style.display="none";
					milkbtn4.style.display="none";
					led.style.display="none";
					shockbtn1.style.display="none";
					shockbtn2.style.display="none";
				}

				if (challenge==1 || challenge==3) {
					character1.style.visibility="hidden";
					character2.style.visibility="hidden";
					character3.style.visibility="hidden";
					slug.style.display="none";
					cam.src="img/camera/CAM6.png";
				}
			}, "220");
			setTimeout(() => {
				static.style.transition="opacity 0.7s";
			}, "310");
			setTimeout(() => {
				static.style.opacity="40%";
			}, "320");
		}else{
			usagenum--;
			pizzaPress(false);
			changeVolume("Buzz_Fan_Florescent2",0.4);
			changeVolume("MiniDV_Tape_Eject_1",0);
			changeVolume("CAMERA_VIDEO_LOA_60105303",0);
			changeVolume("EerieAmbienceLargeSca_MV005",0.01);
			changeVolume("OVEN-DRA_1_GEN-HDF18119",0.1);
			changeVolume("OVEN-DRA_2_GEN-HDF18120",0.1);
			changeVolume("OVEN-DRA_7_GEN-HDF18121",0.1);
			changeVolume("OVEN-DRAWE_GEN-HDF18122",0.1);
			changeVolume("gen",0.01);
			changeVolume("genstart",0.01);
			changeVolume("genend",0.01);
			playSound("put down",false);
			camerabg.src="img/monitorclose.gif";
			officemovetrigger1.style.display="block";
			officemovetrigger11.style.display="block";
			officemovetrigger111.style.display="block";
			officemovetrigger2.style.display="block";
			officemovetrigger22.style.display="block";
			officemovetrigger222.style.display="block";
			buttontrigger1.style.display="block";
			lighttrigger1.style.display="block";
			buttontrigger2.style.display="block";
			lighttrigger2.style.display="block";
			freddyboop.style.display="block";
			camerassets.style.display="none";
			brokenoverlay.style.display="none";
			slug.style.display="none";
			led.style.display="none";
			cam.style.visibility="hidden";
			character1.style.visibility="hidden";
			character2.style.visibility="hidden";
			character3.style.visibility="hidden";
			pizzabtn.style.display="none";
			changeVolume("CrumblingDreams",0.01);
			for(i = 0; i < lines.length; i++) {
  			  lines[i].style.visibility="hidden";
  			}
  			camera.checked = false;
			timeoutID = setTimeout(() => {
			  	camerabg.style.visibility="hidden";
			  	if(deathdelay==true){
					furrydeath();
				}
			}, "220");
		}
	}
}

function tick(){
	if (power!=-1) {
		if (powercheat==false) {
			loadme();
		}else{
			visualPower.innerHTML = "∞";
		}
		if (currentnight!=1 && challenge==0 || currentnightch1!=1 && challenge==1 || currentnightch2!=1 && challenge==2 || currentnightch3!=1 && challenge==3) {
			windKiz();
			kizvisual();
		}
		if (officerepeatsrc==true && officerepeatsrc!="beans") {
			officerepeatsrc=false;
			changeofficesrc();
		}
	}else{
		spawnowo();
	}
	if (cameradelay!=10) {
		cameradelay++;
	}
	if (doordelay!=10) {
		doordelay++;
	}
	if (pizzadelay!=10) {
		pizzadelay++;
	}
	if (cameramovedelay>0 && cameramovedelay<100) {
		cameramovedelay++;
	}else{
		if (cameramovedelay<0 && cameramovedelay>-100) {
			cameramovedelay--;
		}
	}
	if (currenttime<4800) {
		timecount();
	}else{
		clearInterval(tickinterval);
		clearInterval(blinkinterval);
		clearInterval(timerinterval);
		for (var i = 0; i < timeouts.length; i++) {
        	clearTimeout(timeouts[i]);
    	}
		timerinterval = null;
		if (!cheated) {
    		switch (challenge) {
    		    case 0:
    		        cookieName = "timernight" + currentnight;
    		        break;
    		    case 1:
    		        cookieName = "ch1timernight" + currentnightch1;
    		        break;
    		    case 2:
    		        cookieName = "ch2timernight" + currentnightch2;
    		        break;
    		    case 3:
    		        cookieName = "ch3timernight" + currentnightch3;
    		        break;
    		}
    		
    		if (getCookie(cookieName) !== undefined && getCookie(cookieName) < miliseconds || getCookie(cookieName) === undefined) {
    		    document.cookie = cookieName + "=" + miliseconds + "; path=/";
    		}
		}

		dayend();
	}
	movecameras();
	updateUsage();
	if (character1cam=="6" && kitchendelay==false && currentcam=="6" && camera.checked==true || character2cam=="6" && kitchendelay==false && currentcam=="6" && camera.checked==true) {
		kitchendelay=true;
		kitchenSound();
	}
	if (character1cam!="6" && character2cam!="6") {
		changeVolume("OVEN-DRA_1_GEN-HDF18119",0);
		changeVolume("OVEN-DRA_2_GEN-HDF18120",0);
		changeVolume("OVEN-DRA_7_GEN-HDF18121",0);
		changeVolume("OVEN-DRAWE_GEN-HDF18122",0);
	}
}

function loadme(){
	if (ledcolor!="transparent") {
		power -= 0.01;
	}else{
		if (challenge==2 && currentnightch2>4) {
			power = power+0.01+0.001*currentnightch2;
		}else{
			if (challenge==3 && currentnightch3>4) {
				power = power+0.01+0.001*currentnightch3;
			}else{
				power = power+0.01;
			}
		}	
	}
	
	if (door1.checked) {
	    power -= doorConsumption;
	}
	if (door2.checked) {
	    power -= doorConsumption;
	}
	if (light1.checked || light2.checked) {
	    power -= lightConsumption;
	}
	if(camera.checked){
		power -= cameraConsumption;
	}
	if (power <= 0) {
	    power = -1;
	    milktext1.style.display="none";
	    milktext2.style.display="none";
	    visualPower.innerHTML = "OUT OF MILK!";
	    outofpower();
	    return;
	}else{
		visualPower.innerHTML = power.toFixed(0);
	}
	
}

function movebg(side) {
	clearInterval(intervalId);
	if (side<=2 && officedistance<=0 && camera.checked==false) {
		switch (side){
			case 0:
				intervalId = setInterval(movebgleft, 1, 0.08);
				break;
			case 1:
				intervalId = setInterval(movebgleft, 1, 0.15);
				break;
			case 2:
				intervalId = setInterval(movebgleft, 1, 0.25);
				break;
		}
	}else{
		if (side>=3 && side!=10 && officedistance>=-50 && camera.checked==false) {
			switch (side){
				case 3:
					intervalId = setInterval(movebgright, 1, 0.08);
					break;
				case 4:
					intervalId = setInterval(movebgright, 1, 0.15);
					break;
				case 5:
					intervalId = setInterval(movebgright, 1, 0.25);
					break;
			}
		}
	}
	
}

function movebgleft(distance) {
	if (officedistance<=0) {
		if (navigator.userAgent.indexOf("Firefox") !== -1) {
		    officedistance=officedistance+distance*3;
		}else{
			officedistance=officedistance+distance;
		}
		office.style.left= officedistance+"%";
	}	
}

function movebgright(distance) {
	if (officedistance>=-50) {
		if (navigator.userAgent.indexOf("Firefox") !== -1) {
		    officedistance=officedistance-distance*3;
		}else{
			officedistance=officedistance-distance;
		}
		office.style.left= officedistance+"%";
	}	
}

function doorbtn(direction) {
	if (power>0) {
		if (doordelay==10) {
			doordelay=0;
			if (deathdelay==false) {
				playSound("SFXBible_12478",false);
			}else{
				playSound("error",false);
			}
			if (direction==0 && deathdelay==false) {
				if (door1.checked==false) {
					door1.checked=true;
					usagenum++;
					leftbutton.src="img/buttons/Leftbuttonon.png";
					leftdoor.src="img/buttons/Door_Lclose.gif";
				}else{
					door1.checked = false;
					usagenum--;
					leftbutton.src="img/buttons/Leftbutton.png";
					leftdoor.src="img/buttons/Door_Lopen.gif";
				}
			}else{
				if (door2.checked==false && deathdelay==false) {
					door2.checked=true;
					usagenum++;
					rightbutton.src="img/buttons/rightbuttonon.png";
					rightdoor.src="img/buttons/Door_Rclose.gif";
				}else{
					if (deathdelay==false) {
						door2.checked = false;
						usagenum--;
						rightbutton.src="img/buttons/rightbutton.png";
						rightdoor.src="img/buttons/Door_Ropen.gif";
					}
				}
			}
		}	
	}else{
		playSound("error",false);
	}
}

function lightbtn(direction) {
	if (power>0) {
		if (direction==0 && deathdelay==false) {
			if (light1.checked==false && lightbreakleft>0) {
				if (light2.checked==false) {
					usagenum++;
				}
				light1.checked=true;
				light2.checked=false;
				changeVolume("BallastHumMedium2",0);
				playSound("BallastHumMedium2",true);
				leftlight.src="img/buttons/Leftlighton.png";
				officelights1.style.display="block";
				ryanoffice.style.visibility="visible";
				if (character1cam=="office" && windowleft==false) {
					playSound("windowscare",false);
					windowleft=true;
				}
				rightlight.src="img/buttons/rightlight.png";
				officelights2.style.display="none";
				lightBrk("left");
			}else{
				light1.checked=false;
				light2.checked=false;
				if (lightbreakleft>0) {
					usagenum--;
				}else{
					playSound("error",false);
				}
				changeVolume("BallastHumMedium2",0);
				leftlight.src="img/buttons/Leftlight.png";
				rightlight.src="img/buttons/rightlight.png";
				officelights1.style.display="none";
				officelights2.style.display="none";
				ryanoffice.style.visibility="hidden";
				joeyoffice.style.visibility="hidden";
				
			}
		}else{
			if (deathdelay==false) {
				if (light2.checked==false && lightbreakright>0) {
					if (light1.checked==false) {
						usagenum++;
					}
					light2.checked=true;
					light1.checked=false;
					changeVolume("BallastHumMedium2",0);
					playSound("BallastHumMedium2",true);
					rightlight.src="img/buttons/rightlighton.png";
					officelights2.style.display="block";
					joeyoffice.style.visibility="visible";
					if (character2cam=="office" && windowright==false) {
						playSound("windowscare",false);
						windowright=true;
					}
					leftlight.src="img/buttons/Leftlight.png";
					officelights1.style.display="none";
					lightBrk("right");
				}else{
					light2.checked=false;
					light1.checked=false;
					if (lightbreakright>0) {
						usagenum--;
					}else{
						playSound("error",false);
					}
					changeVolume("BallastHumMedium2",0);
					rightlight.src="img/buttons/rightlight.png";
					leftlight.src="img/buttons/Leftlight.png";
					officelights1.style.display="none";
					officelights2.style.display="none";
					ryanoffice.style.visibility="hidden";
					joeyoffice.style.visibility="hidden";
					
				}
			}else{
				playSound("error",false);
			}
			
		}	
	}else{
		playSound("error",false);
	}
	
}

function outofpower(){
	setTimeout(() => {
		forceowo=true;
	}, "30000");
	stopSound();
	playSound("powerdown",false);
	windnumb=1000000;
	txtUI.style.display="none";
	if (currentnight==3 && challenge==0) {
		if (Math.trunc(currenttime/800)>3) {
			playSound("fire",true);
		}
	}
	officerepeatsrc="beans";
	officebg.src="img/background/office2.png";
	lightbreakright=-1;
	lightbreakleft=-1;
	light2.checked=false;
	light1.checked=false;
	deathdelay=false;
	rightlight.src="img/buttons/rightlight.png";
	leftlight.src="img/buttons/Leftlight.png";
	officelights1.style.display="none";
	officelights2.style.display="none";
	camerassets.style.display="none";
	amtime.style.display="none";
	nighttime.style.display="none";
	exacttime.style.display="none";
	slug.style.display="none";
	mutecall.style.display="none";
	cam.style.visibility="hidden";
	character1.style.visibility="hidden";
	character2.style.visibility="hidden";
	character3.style.visibility="hidden";
	ryanoffice.style.visibility="hidden";
	joeyoffice.style.visibility="hidden";
	officemovetrigger1.style.display="block";
	officemovetrigger11.style.display="block";
	officemovetrigger111.style.display="block";
	officemovetrigger2.style.display="block";
	officemovetrigger22.style.display="block";
	officemovetrigger222.style.display="block";
	buttontrigger1.style.display="block";
	lighttrigger1.style.display="block";
	buttontrigger2.style.display="block";
	lighttrigger2.style.display="block";
	freddyboop.style.display="block";
	for(i = 0; i < lines.length; i++) {
  	  lines[i].style.visibility="hidden";
  	}
	if (door1.checked) {
		door1.checked = false;
		leftbutton.src="img/buttons/Leftbutton.png";
		leftdoor.src="img/buttons/Door_Lopen.gif";
		playSound("SFXBible_12478",false);
	}
	if (door2.checked) {
		door2.checked = false;
		rightbutton.src="img/buttons/rightbutton.png";
		rightdoor.src="img/buttons/Door_Ropen.gif";
		playSound("SFXBible_12478",false);
	}
	cameratrigger.style.display="none";
	camerabutton.style.display="none";
	if (camera.checked) {
		camerabg.src="img/monitorclose.gif";
		camera.checked = false;
		setTimeout(() => {
		  camerabg.style.visibility="hidden";
		}, "220");
	}
}

function changecam(camnmb){
	playSound("blip3",false);
	document.getElementById("cam"+currentcam).style.filter ="grayscale(1)";
	currentcam=camnmb;
	document.getElementById("cam"+currentcam).style.filter ="grayscale(0)";
	cam.src="img/camera/CAM"+camnmb.toUpperCase()+".png";
	if (currentcam=="milk" && camera.checked==true) {
		changeVolume("gen",1);
		changeVolume("genstart",1);
		changeVolume("genend",1);
	}else{
		changeVolume("gen",0.01);
		changeVolume("genstart",0.01);
		changeVolume("genend",0.01);
	}
	if (camnmb==character1cam && camnmb!="6") {
		character1.style.visibility="visible";
	}else{
		character1.style.visibility="hidden";
		if (currentcam=="6") {
			changeVolume("OVEN-DRA_1_GEN-HDF18119",1);
			changeVolume("OVEN-DRA_2_GEN-HDF18120",1);
			changeVolume("OVEN-DRA_7_GEN-HDF18121",1);
			changeVolume("OVEN-DRAWE_GEN-HDF18122",1);
		}else{
			changeVolume("OVEN-DRA_1_GEN-HDF18119",0.01);
			changeVolume("OVEN-DRA_2_GEN-HDF18120",0.01);
			changeVolume("OVEN-DRA_7_GEN-HDF18121",0.01);
			changeVolume("OVEN-DRAWE_GEN-HDF18122",0.01);
		}
	}
	if (camnmb==character2cam && camnmb!="6") {
		character2.style.visibility="visible";
	}else{
		character2.style.visibility="hidden";
		if (currentcam=="6") {
			changeVolume("OVEN-DRA_1_GEN-HDF18119",1);
			changeVolume("OVEN-DRA_2_GEN-HDF18120",1);
			changeVolume("OVEN-DRA_7_GEN-HDF18121",1);
			changeVolume("OVEN-DRAWE_GEN-HDF18122",1);
		}else{
			changeVolume("OVEN-DRA_1_GEN-HDF18119",0.01);
			changeVolume("OVEN-DRA_2_GEN-HDF18120",0.01);
			changeVolume("OVEN-DRA_7_GEN-HDF18121",0.01);
			changeVolume("OVEN-DRAWE_GEN-HDF18122",0.01);
		}
	}
	if (camnmb==character3cam && camera.checked==true) {
		character3.style.visibility="visible";
		pizzabtn.style.display="block";
		changeVolume("CrumblingDreams",0.8);
		changeVolume("EerieAmbienceLargeSca_MV005",0.01);
	}else{
		character3.style.visibility="hidden";
		pizzabtn.style.display="none";
		changeVolume("CrumblingDreams",0.01);
		changeVolume("EerieAmbienceLargeSca_MV005",0.5);
	}
	if (camnmb=="1c") {
		brokenoverlay.style.display="block";
	}else{
		brokenoverlay.style.display="none";
	}
	if (currentcam=="milk") {
		const styles = ["8%", "20%", "32%", "44%"];

		for (let i = styles.length - 1; i > 0; i--) {
		  const j = Math.floor(Math.random() * (i + 1));
		  [styles[i], styles[j]] = [styles[j], styles[i]];
		}
		milkbtn1.style.left=styles[0];
		milkbtn2.style.left=styles[1];
		milkbtn3.style.left=styles[2];
		milkbtn4.style.left=styles[3];

		milkbtn1.style.display="block";
		milkbtn2.style.display="block";
		milkbtn3.style.display="block";
		milkbtn4.style.display="block";
		led.style.display="block";
		shockbtn1.style.display="block";
		shockbtn2.style.display="block";
	}else{
		milkbtn1.style.display="none";
		milkbtn2.style.display="none";
		milkbtn3.style.display="none";
		milkbtn4.style.display="none";
		led.style.display="none";
		shockbtn1.style.display="none";
		shockbtn2.style.display="none";
	}
	slug.style.display="none";
	if (windnumb<=-1000 && camnmb=="1c" && currenttime<4800 && power>0) {
		slug.style.display="block";
		cameratrigger.style.display="none";
		camerabutton.style.display="none";
		setTimeout(() => {
			slug.style.left="108%";
			slug.style.top="48%";
		}, "500");
		const timeout14 = setTimeout(() => {
			kizzydeath();
		}, "2500");
		
		timeouts.push(timeout14);
	}
	switch (camnmb){
		case "1b":
			if (challenge==0 || challenge==2) {
				camtxt.innerHTML="Dining Area";
			}else{
				camtxt.innerHTML="Dining Area<br>-AUDIO ONLY-";
			}
			break;
		case "1c":
			if (challenge==0 || challenge==2) {
				camtxt.innerHTML="Hallway -BROKEN-";
			}else{
				camtxt.innerHTML="Hallway<br>-AUDIO ONLY-";
			}
			break;
		case "5":
			if (challenge==0 || challenge==2) {
				camtxt.innerHTML="Pizza Cove";
			}else{
				camtxt.innerHTML="Pizza Cove<br>-AUDIO ONLY-";
			}
			break;
		case "6":
			camtxt.innerHTML="Kitchen<br>-AUDIO ONLY-";
			break;
		case "milk":
			camtxt.innerHTML="Milk Room";
			break;
	}
	if (challenge==1 || challenge==3 && currentcam!="milk") {
		character1.style.visibility="hidden";
		character2.style.visibility="hidden";
		character3.style.visibility="hidden";
		slug.style.display="none";
		cam.src="img/camera/CAM6.png";
	}
	static.style.removeProperty('transition');
	static.style.opacity="70%";
	setTimeout(() => {
		static.style.transition="opacity 0.7s";
	}, "310");
	setTimeout(() => {
		static.style.opacity="40%";
	}, "320");
}

function camblink(){
	if (blink) {
		document.getElementById("cam"+currentcam).style.filter ="grayscale(0)";
		blink=false;
	}else{
		document.getElementById("cam"+currentcam).style.filter ="grayscale(1)";
		blink=true;
	}
}

function timecount() {
	var x;
	currenttime++;
	x= Math.trunc(currenttime/800);
	if (x==0) {
		x=12;
	}
	if (currentnight==3 && challenge==0) {
		if (x==3 && votest==false) {
			if (currentnight==3) {
				playSound("4VO",false);
			}
			votest=true;
			const timeout26 = setTimeout(() => {
				mutecall.style.display="block";
			}, "18000");
			timeouts.push(timeout26);
			const timeout25 = setTimeout(() => {
				//mutecall.style.display="none";
			}, "73000");
			timeouts.push(timeout25);
			const timeout13 = setTimeout(() => {
				fire.style.display="block";
				playSound("fire",true);
				if (lightbreakleft>1) {
					lightbreakleft=1;
				}
				if (lightbreakright>1) {
					lightbreakright=1;
				}
			}, "97000");
			timeouts.push(timeout13);
			const timeout24 = setTimeout(() => {
				fire.style.opacity="70%";
			}, "97100");
			timeouts.push(timeout24);
		}
	}
	amtime.innerHTML= x + " AM";
}

function movecameras(){
	if (cameramovedelay==100 && currentcam!="1c") {
		cameramovedelay=-1;
		camchar.style.left= "-10%";
	}else{
		if (cameramovedelay==-100 && currentcam!="1c") {
			cameramovedelay=1;
			camchar.style.left= "4%";
		}
	}
}

function selectmenu(menutype){
    playSound("blip3",false);
    switch(menutype){
        case 0:
            select.style.bottom="40%";
            select.style.left="8%";
            continuenight.style.display="none";
            rightnightbtn.style.display="none";
            leftnightbtn.style.display="none";
            continuetime.style.display="none";
            continueflash.style.display="none";
            continuemirror.style.display="none";
            break;
        case 1:
            select.style.bottom="30%";
            select.style.left="8%";
            continuenight.style.display="block";
            continueflash.style.display="none";
            continuemirror.style.display="none";
            if (challenge==0) {
            	continuenight.innerHTML="Night " + currentnight;
            	if (nighthighscore>=3 && getCookie("timernight"+currentnight) !== undefined && currentnight!=3 && currentnight!=2 && currentnight!=1) {
            	    var miliseconds = getCookie("timernight"+currentnight);
            	    var seconds = Math.floor((miliseconds / 10) % 60);
            	    var minutes = Math.floor(miliseconds / 600);
	
            	    if (minutes >= 1) {
            	        seconds = Math.floor((miliseconds / 10) % 60);
            	        minutes = Math.floor((miliseconds / 600) % 60);
            	    }
	
            	    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            	    continuetime.style.display="block";
            	    cookieNameMirror = "cookieMirror" + currentnight;
					cookieNameFlash = "cookieFlash" + currentnight;
            	    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            	    	continueflash.style.left="20%";
            	    	continueflash.style.display="block";
            	    	continuemirror.style.left="18%";
            	    	continuemirror.style.display="block";
            	    }else{
            	    	if (getCookie(cookieNameFlash) !== undefined) {
            	    		continueflash.style.left="18%";
            	    		continueflash.style.display="block";
            	    		continuemirror.style.display="none";
            	    	}else{
            	    		if (getCookie(cookieNameMirror) !== undefined) {
            	    			continuemirror.style.left="18%";
            	    			continuemirror.style.display="block";
            	    			continueflash.style.display="none";
            	    		}
            	    	}
            	    }
            	}
            }else{
            	if (challenge==1) {
            		continuenight.innerHTML="Night " + currentnightch1;
            		if (getCookie("ch1timernight"+currentnightch1) !== undefined) {
            		    var miliseconds = getCookie("ch1timernight"+currentnightch1);
            		    var seconds = Math.floor((miliseconds / 10) % 60);
            		    var minutes = Math.floor(miliseconds / 600);
		
            		    if (minutes >= 1) {
            		        seconds = Math.floor((miliseconds / 10) % 60);
            		        minutes = Math.floor((miliseconds / 600) % 60);
            		    }
		
            		    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            		    continuetime.style.display="block";
            		    cookieNameMirror = "ch1cookieMirror" + currentnightch1;
						cookieNameFlash = "ch1cookieFlash" + currentnightch1;
            		    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            		    	continueflash.style.left="20%";
            		    	continueflash.style.display="block";
            		    	continuemirror.style.left="18%";
            		    	continuemirror.style.display="block";
            		    }else{
            		    	if (getCookie(cookieNameFlash) !== undefined) {
            		    		continueflash.style.left="18%";
            		    		continueflash.style.display="block";
            		    		continuemirror.style.display="none";
            		    	}else{
            		    		if (getCookie(cookieNameMirror) !== undefined) {
            		    			continuemirror.style.left="18%";
            		    			continuemirror.style.display="block";
            		    			continueflash.style.display="none";
            		    		}
            		    	}
            		    }
            		}
            	}else{
            		if (challenge==2) {
            			continuenight.innerHTML="Night " + currentnightch2;
            			if (getCookie("ch2timernight"+currentnightch2) !== undefined) {
            			    var miliseconds = getCookie("ch2timernight"+currentnightch2);
            			    var seconds = Math.floor((miliseconds / 10) % 60);
            			    var minutes = Math.floor(miliseconds / 600);
			
            			    if (minutes >= 1) {
            			        seconds = Math.floor((miliseconds / 10) % 60);
            			        minutes = Math.floor((miliseconds / 600) % 60);
            			    }
			
            			    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            			    continuetime.style.display="block";
            			    cookieNameMirror = "ch2cookieMirror" + currentnightch2;
							cookieNameFlash = "ch2cookieFlash" + currentnightch2;
            			    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            			    	continueflash.style.left="20%";
            			    	continueflash.style.display="block";
            			    	continuemirror.style.left="18%";
            			    	continuemirror.style.display="block";
            			    }else{
            			    	if (getCookie(cookieNameFlash) !== undefined) {
            			    		continueflash.style.left="18%";
            			    		continueflash.style.display="block";
            			    		continuemirror.style.display="none";
            			    	}else{
            			    		if (getCookie(cookieNameMirror) !== undefined) {
            			    			continuemirror.style.left="18%";
            			    			continuemirror.style.display="block";
            			    			continueflash.style.display="none";
            			    		}
            			    	}
            			    }
            			}
            		}else{
            			if (challenge==3) {
            				continuenight.innerHTML="Night " + currentnightch3;
            				if (getCookie("ch3timernight"+currentnightch3) !== undefined) {
            				    var miliseconds = getCookie("ch3timernight"+currentnightch3);
            				    var seconds = Math.floor((miliseconds / 10) % 60);
            				    var minutes = Math.floor(miliseconds / 600);
				
            				    if (minutes >= 1) {
            				        seconds = Math.floor((miliseconds / 10) % 60);
            				        minutes = Math.floor((miliseconds / 600) % 60);
            				    }
				
            				    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            				    continuetime.style.display="block";
            				    cookieNameMirror = "ch3cookieMirror" + currentnightch3;
								cookieNameFlash = "ch3cookieFlash" + currentnightch3;
            				    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            				    	continueflash.style.left="20%";
            				    	continueflash.style.display="block";
            				    	continuemirror.style.left="18%";
            				    	continuemirror.style.display="block";
            				    }else{
            				    	if (getCookie(cookieNameFlash) !== undefined) {
            				    		continueflash.style.left="18%";
            				    		continueflash.style.display="block";
            				    		continuemirror.style.display="none";
            				    	}else{
            				    		if (getCookie(cookieNameMirror) !== undefined) {
            				    			continuemirror.style.left="18%";
            				    			continuemirror.style.display="block";
            				    			continueflash.style.display="none";
            				    		}
            				    	}
            				    }
            				}
            			}
            		}
            	}
            }
            

            if (nighthighscore>=4 && challenge==0 || nighthighscorech1>=4 && challenge==1 || nighthighscorech2>=4 && challenge==2 || nighthighscorech3>=4 && challenge==3) {
                rightnightbtn.style.display="block";
                leftnightbtn.style.display="block";
            }
            break;
        case 2:
            select.style.bottom="7%";
            select.style.left="82%";
            continuenight.style.display="none";
            rightnightbtn.style.display="none";
            leftnightbtn.style.display="none";
            continuetime.style.display="none";
            continueflash.style.display="none";
            continuemirror.style.display="none";
            break;
        case 3:
        	select.style.bottom="50%";
            select.style.left="8%";
        	break;
        case 4:
            select.style.bottom="7%";
            select.style.left="79%";
            break;
        case 5:
            select.style.bottom="40%";
            select.style.left="8%";
            break;
        case 6:
            select.style.bottom="13%";
            select.style.left="84%";
            continuenight.style.display="none";
            rightnightbtn.style.display="none";
            leftnightbtn.style.display="none";
            continuetime.style.display="none";
            continueflash.style.display="none";
            continuemirror.style.display="none";
            break;
        case 7:
            select.style.bottom="13%";
            select.style.left="79%";
            break;
        case 8:
            select.style.bottom="53%";
            select.style.left="8%";
            break;
        case 9:
            select.style.bottom="43%";
            select.style.left="8%";
            break;
        case 10:
            select.style.bottom="23%";
            select.style.left="8%";
            break;
        case 11:
            select.style.bottom="33%";
            select.style.left="8%";
            break;
        default:
            break;
    }
}


function startnight(night) {
	switch (challenge) {
	    case 0:
	        currentnight = night;
	        break;
	    case 1:
	        currentnightch1 = night;
	        break;
	    case 2:
	        currentnightch2 = night;
	        break;
	    case 3:
	        currentnightch3 = night;
	        break;
	    default:
	        break;
	}

	menu.style.opacity="0%";
	tvstatic.style.opacity="0%";
	newgame.removeAttribute("onclick");
	newgame.removeAttribute("onmouseover");
	options.removeAttribute("onclick");
	options.removeAttribute("onmouseover");
	leftnightbtn.removeAttribute("onclick");
	rightnightbtn.removeAttribute("onclick");
	continuemenu.removeAttribute("onclick");
	continuemenu.removeAttribute("onmouseover");
	setTimeout(() => {
		stopSound();
		loadscreen.style.display="block";
		loadprogress.style.display="block";
		menu.style.display="none";
		menu.style.opacity="100%";
		select.style.bottom="40%";
		continuenight.style.display="none";
		leftnightbtn.style.display="none";
		rightnightbtn.style.display="none";
		continuetime.style.display="none";
		continueflash.style.display="none";
        continuemirror.style.display="none";
		newgame.setAttribute("onclick", "startnight(1);");
		newgame.setAttribute("onmouseover", "selectmenu(0);");
		options.setAttribute("onclick", "optionsmenu(0);");
		options.setAttribute("onmouseover", "selectmenu(2);");
		leftnightbtn.setAttribute("onclick", "increasenight(0);");
		rightnightbtn.setAttribute("onclick", "increasenight(1);");
		switch (challenge) {
		    case 0:
		        continuemenu.setAttribute("onclick", "startnight(currentnight);");
		        break;
		    case 1:
		        continuemenu.setAttribute("onclick", "startnight(currentnightch1);");
		        break;
		    case 2:
		        continuemenu.setAttribute("onclick", "startnight(currentnightch2);");
		        break;
		    case 3:
		        continuemenu.setAttribute("onclick", "startnight(currentnightch3);");
		        break;
		    default:
		        break;
		}
		continuemenu.setAttribute("onmouseover", "selectmenu(1);");
		checkloading();
	}, "3100");
}

function fadewarning(timerout){
	warning.removeAttribute("onclick");
	warning.style.opacity="0%";
	for (var i = 0; i < timeouts.length; i++) {
        clearTimeout(timeouts[i]);
    }
	setTimeout(() => {
		switch (challenge) {
		    case 0:
		        continuenight.innerHTML="Night " + currentnight;
		        break;
		    case 1:
		        continuenight.innerHTML="Night " + currentnightch1;
		        break;
		    case 2:
		        continuenight.innerHTML="Night " + currentnightch2;
		        break;
		    case 3:
		        continuenight.innerHTML="Night " + currentnightch3;
		        break;
		    default:
		        break;
		}
		menu.style.display="block";
		warning.style.display="none";
		timescore.style.display = "none";
		timescore.style.opacity = "100%";
		switch (challenge) {
		    case 0:
		        menucharacter.src = "img/menu/FNaFFreddy_Menu.gif";
		        titlemode.innerHTML="";
		        menutitlemode.innerHTML="";
		        break;
		    case 1:
		        menucharacter.src = "img/menu/boykissblind.gif";
		        titlemode.innerHTML="Blind Mode";
		        titlemode.style.animation="glowingch1 1.5s infinite";
		        menutitlemode.innerHTML="Blind Mode";
		        menutitlemode.style.animation="glowingch1 1.5s infinite";
		        break;
		    case 2:
		        menucharacter.src = "img/menu/boykissmilk.gif";
		        titlemode.innerHTML="Milk Mode";
		        titlemode.style.animation="glowingch2 1.5s infinite";
		        menutitlemode.innerHTML="Milk Mode";
		        menutitlemode.style.animation="glowingch2 1.5s infinite";
		        break;
		    case 3:
		        menucharacter.src = "img/menu/boykissblindmilk.gif";
		        titlemode.innerHTML="Blind Milk Mode";
		        titlemode.style.animation="glowingch3 1.5s infinite";
		        menutitlemode.innerHTML="Blind Milk Mode";
		        menutitlemode.style.animation="glowingch3 1.5s infinite";
		        break;
		    default:
		        break;
		}
		for(i = 0; i < lines.length; i++) {
  		  lines[i].style.display="block";
  		}
  		playSound("darkness_music",true);
  		playSound("static",false);
  		if (nighthighscore>=3) {
  			starpng.style.display="block";
  			extras.style.display="block";
  			if (nighthighscore>=4) {
  				starnumber.style.display="block";
  				starnumber.innerHTML=nighthighscore;
  			}
  			if (nighthighscorech1>=3) {
  				starpng1.style.display="block";
  			}
  			if (nighthighscorech1>=4) {
  				starnumber1.style.display="block";
  				starnumber1.innerHTML=nighthighscorech1;
  			}
  			if (nighthighscorech2>=3) {
  				starpng2.style.display="block";
  			}
  			if (nighthighscorech2>=4) {
  				starnumber2.style.display="block";
  				starnumber2.innerHTML=nighthighscorech2;
  			}
  			if (nighthighscorech3>=3) {
  				starpng3.style.display="block";
  			}
  			if (nighthighscorech3>=4) {
  				starnumber3.style.display="block";
  				starnumber3.innerHTML=nighthighscorech3;
  			}
  			if (cheated==true) {
  				continuewarning.style.display="block";
  				continuewarningmsg.style.display="block";
  			}else{
  				continuewarning.style.display="none";
  				continuewarningmsg.style.display="none";
  			}
  		}
	}, timerout);
}

function checkloading(){
	if (currentnight==1 && videned==false && challenge==0) {
		myVideo.style.display="block";
		myVideo.play();
		skipintro.style.display="block";
	}else{
		myVideo.style.display="none";
		skipintro.style.display="none";
		if (loadma == true) {
			switch (challenge) {
			    case 0:
			        daystart(currentnight);
			        break;
			    case 1:
			        daystart(currentnightch1);
			        break;
			    case 2:
			        daystart(currentnightch2);
			        break;
			    case 3:
			        daystart(currentnightch3);
			        break;
			    default:
			        break;
			}
		}else{
			setTimeout(() => {
				checkloading();
			}, "1000");
		}
	}
}

function skipvideo(){
	myVideo.pause();
    myVideo.currentTime = 0;
	videned = true;
	checkloading();
}

myVideo.addEventListener('ended',myHandler,false);
var videned = false;
function myHandler() {
	videned = true;
	checkloading();
}

function daystart(night){
	playSound("blip3",false);
	loadscreen.style.display="none";
	loadprogress.style.display="none";
	menutime.style.display="block";
	if (night>20 || night<-20) {
		night=night.toString();
		night=night.slice(-1);
	}
	night=parseInt(night);
	switch (challenge) {
	    case 0:
			switch (night){
				case 1:
					menunight.innerHTML= currentnight + "st Night";
					break;
				case 2:
					menunight.innerHTML= currentnight + "nd Night";
					break;
				case 3:
					menunight.innerHTML= currentnight + "rd Night";
					break;
				default:
					menunight.innerHTML= currentnight + "th Night";
					break;
			}
			nighttime.innerHTML="Night " + currentnight;
			continuenight.innerHTML="Night " + currentnight;
	        break;
	    case 1:
	        switch (night){
				case 1:
					menunight.innerHTML= currentnightch1 + "st Night";
					break;
				case 2:
					menunight.innerHTML= currentnightch1 + "nd Night";
					break;
				case 3:
					menunight.innerHTML= currentnightch1 + "rd Night";
					break;
				default:
					menunight.innerHTML= currentnightch1 + "th Night";
					break;
			}
			nighttime.innerHTML="Night " + currentnightch1;
			continuenight.innerHTML="Night " + currentnightch1;
	        break;
	    case 2:
	        switch (night){
				case 1:
					menunight.innerHTML= currentnightch2 + "st Night";
					break;
				case 2:
					menunight.innerHTML= currentnightch2 + "nd Night";
					break;
				case 3:
					menunight.innerHTML= currentnightch2 + "rd Night";
					break;
				default:
					menunight.innerHTML= currentnightch2 + "th Night";
					break;
			}
			nighttime.innerHTML="Night " + currentnightch2;
			continuenight.innerHTML="Night " + currentnightch2;
	        break;
	    case 3:
	        switch (night){
				case 1:
					menunight.innerHTML= currentnightch3 + "st Night";
					break;
				case 2:
					menunight.innerHTML= currentnightch3 + "nd Night";
					break;
				case 3:
					menunight.innerHTML= currentnightch3 + "rd Night";
					break;
				default:
					menunight.innerHTML= currentnightch3 + "th Night";
					break;
			}
			nighttime.innerHTML="Night " + currentnightch3;
			continuenight.innerHTML="Night " + currentnightch3;
	        break;
	    default:
	        break;
	}
	menunight.style.display="block";
	menutitlemode.style.display="block";
	tvstatic.style.transition="opacity 0s";
	tvstatic.style.opacity="100%";
	for(i = 0; i < lines.length; i++) {
		lines[i].style.opacity="90%";
  	 	lines[i].style.visibility="visible";
  	}
  	setTimeout(() => {
		for(i = 0; i < lines.length; i++) {
  			lines[i].style.visibility="hidden";
  		}
	}, "200");
	setTimeout(() => {
		menutime.style.opacity="0%";
		menunight.style.opacity="0%";
		menutitlemode.style.opacity="0%";
	}, "4000");
	setTimeout(() => {
		if (challenge==0 || challenge==1) {
			power = 99;
		}else{
			if (challenge==2 && currentnightch2<=4) {
				power = 60-currentnightch2*5;
			}else{
				if (challenge==2) {
					power = 40-currentnightch2;
				}else{
					if (challenge==3 && currentnightch3<=4) {
						power = 60-currentnightch3*5;
					}else{
						if (challenge==3) {
							power = 40-currentnightch3;
						}
					}
				}
			}
			
		}

		if (power<10) {
			power=10;
		}

		cameradelay = 10;
		doordelay = 10;
		cameramovedelay = 100;
		windnumb=100;
		character1cam="1b";
		character1.style.left="34%";
		character1.style.top="13%";
		character1.style.width="33%";
		character1.style.transform = "rotate(0deg)";
		radarryan.style.left="18%";
		radarryan.style.bottom="579%";
		character2cam="1b";
		character2.style.left="68%";
		character2.style.top="33%";
		character2.style.width="31%";
		character2.style.transform = "rotate(0deg)";
		radarjoey.style.left="22%";
		radarjoey.style.bottom="579%";
		radarkizzy.style.backgroundColor="#00FF00";
		lampleft.style.top="27%";
		lampright.style.top="27%";
		if (challenge==0 || challenge==2) {
			camtxt.innerHTML="Dining Area";
		}else{
			camtxt.innerHTML="Dining Area<br>-AUDIO ONLY-";
		}
		if (challenge==2 || challenge==3) {
			map.src="img/camera/mapmilk.png";
			cammilk.style.display="block";
			radarimg.src="img/camera/radarmilk.png";
		}else{
			map.src="img/camera/map.png";
			cammilk.style.display="none";
			radarimg.src="img/camera/radar.png";
		}
		usagenum=1;
		document.getElementById("cam"+currentcam).style.filter ="grayscale(1)";
		blink=false;
		currentcam = "1b";
		currenttime = 0;
		switch (challenge) {
		    case 0:
		        if (currentnight < 11) {
		            lightbreakleft = 11 - currentnight;
		            lightbreakright = 11 - currentnight;
		        } else {
		            lightbreakleft = 1;
		            lightbreakright = 1;
		        }
		        break;
		    case 1:
		        if (currentnightch1 < 11) {
		            lightbreakleft = 11 - currentnightch1;
		            lightbreakright = 11 - currentnightch1;
		        } else {
		            lightbreakleft = 1;
		            lightbreakright = 1;
		        }
		        break;
		    case 2:
		        if (currentnightch2 < 11) {
		            lightbreakleft = 11 - currentnightch2;
		            lightbreakright = 11 - currentnightch2;
		        } else {
		            lightbreakleft = 1;
		            lightbreakright = 1;
		        }
		        break;
		    case 3:
		        if (currentnightch3 < 11) {
		            lightbreakleft = 11 - currentnightch3;
		            lightbreakright = 11 - currentnightch3;
		        } else {
		            lightbreakleft = 1;
		            lightbreakright = 1;
		        }
		        break;
		    default:
		        lightbreakleft = 1;
		        lightbreakright = 1;
		}
		miliseconds = 0;
		if (!timerinterval) {
		    timerinterval = setInterval(upTimer, 100);
		}
		kizstate = 0;
		camtime=0;
    	cameraConsumption = 0.02;
		camera.checked=false;
		light1.checked = false;
		light2.checked = false;
		door1.checked = false;
		door2.checked = false;
		owotoggle=false;
		officerepeatsrc=true;
		kizdeathtoggle=false;
		deathdelay=false;
		votest=false;
		windowleft=false;
		windowright=false;
		pressbool=false;
		forceowo=false;
		windingbool=false;
		for (var i = 0; i < timeouts.length; i++) {
    	    clearTimeout(timeouts[i]);
    	}
		slug.style.display="none";
		slug.style.left="-25%";
		slug.style.top="-64%";
		camerabg.src="img/monitorclose.gif";
		rightbutton.src="img/buttons/rightbutton.png";
		rightdoor.src="img/buttons/Door_Ropen.gif";
		leftbutton.src="img/buttons/Leftbutton.png";
		leftdoor.src="img/buttons/Door_Lopen.gif";
		cam.src="img/camera/CAM"+currentcam.toUpperCase()+".png";
		leftlight.src="img/buttons/Leftlight.png";
		rightlight.src="img/buttons/rightlight.png";
		character3.src="img/camera/box_frame_1.png";
		game.style.pointerEvents= "auto";
		clearTimeout(timeoutID);
		camerassets.style.display="none";
		cam.style.visibility="hidden";
		camerabg.style.visibility="hidden";
		menutime.style.display="none";
		menutitlemode.style.display="none";
		menunight.style.display="none";
		jumpscare.style.display="none";
		menutime.style.opacity="100%";
		menutitlemode.style.opacity="100%";
		menunight.style.opacity="100%";
		game.style.display="block";
		milktext1.style.display="inline";
	    milktext2.style.display="inline";
	    txtUI.style.display="block";
	    office.style.display="block";
	    camchar.style.display="block";
	    officemovetrigger1.style.display="block";
		officemovetrigger11.style.display="block";
		officemovetrigger111.style.display="block";
		officemovetrigger2.style.display="block";
		officemovetrigger22.style.display="block";
		officemovetrigger222.style.display="block";
		buttontrigger1.style.display="block";
		lighttrigger1.style.display="block";
		buttontrigger2.style.display="block";
		lighttrigger2.style.display="block";
		cameratrigger.style.display="block";
		camerabutton.style.display="block";
		freddyboop.style.display="block";
	    officebg.src="img/background/office.png";
	    visualPower.innerHTML = "";
	    character1.style.visibility="hidden";
		character2.style.visibility="hidden";
		character3.style.visibility="hidden";
		pizzabtn.style.display="none";
		owo.style.display="none";
		ryanoffice.style.visibility="hidden";
		joeyoffice.style.visibility="hidden";
		ryanoffice.style.display="none";
		joeyoffice.style.display="none";
		fire.style.display="none";
		fire.style.opacity="0%";
		mutecall.style.display="none";
		changeVolume("CrumblingDreams",0.01);
		amtime.style.display="block";
		nighttime.style.display="block";
		if (currentnight>=4 && challenge==0 || challenge>=1) {
			exacttime.style.display="block";
		}else{
			exacttime.style.display="none";
		}
		for(i = 0; i < lines.length; i++) {
  		  lines[i].style.visibility="hidden";
  		  lines[i].style.zIndex="2";
  		  lines[i].style.opacity="30%";
  		}
		tickinterval = setInterval(tick, 100);
		blinkinterval = setInterval(camblink, 700);
		playSound("ambience2",true);
		playSound("Buzz_Fan_Florescent2",true);
		playSound("CrumblingDreams",true);
		playSound("EerieAmbienceLargeSca_MV005",true);
		changeVolume("Buzz_Fan_Florescent2",0.4);
		changeVolume("CrumblingDreams",0.01);
		changeVolume("EerieAmbienceLargeSca_MV005",0.01);
		setTimeout(() => {	
			ryanMove();
			joeyMove();
			ledrando();
		}, "100");
		if (challenge==0) {
			switch (currentnight){
				case 1:
				case "1":
					playSound("1VO",false);
					break;
				case 2:
				case "2":
					playSound("2VO",false);
					break;
				case 3:
				case "3":
					playSound("3VO",false);
					break;
				case 4:
				case "4":
					playSound("5VO",false);
					break;
			}
		}else{
			if (challenge==1 && currentnightch1==1) {
				playSound("6VO",false);
			}else{
				if (challenge==2 && currentnightch2==1) {
					playSound("7VO",false);
				}else{
					if (challenge==3 && currentnightch3==1) {
						playSound("8VO",false);
					}
				}
			}
		}
		
	}, "7000");
	setTimeout(() => {
		if (currentnight>=1 && currentnight<=4 && challenge==0 || currentnightch1==1 && challenge==1 || currentnightch2==1 && challenge==2 || currentnightch3==1 && challenge==3) {
			mutecall.style.display="block";
		}
	}, "15000");
}

function dayend(){
	stopSound();
	playSound("chimes 2",false);
	game.style.pointerEvents= "none";
	for(i = 0; i < lines.length; i++) {
  	  lines[i].style.visibility="hidden";
  	}
	survived6div.style.display="block";
	game.style.opacity="0%";
	setTimeout(() => {
		survived6div.style.opacity="100%";
	}, "10");
	setTimeout(() => {
		game.style.display="none";
		game.style.opacity="100%";
		survived5.style.bottom="10%";
		survived6.style.bottom="-91%";
		playSound("CROWD_SMALL_CHIL_EC049202",false);
	}, "2500");
	setTimeout(() => {
		survived6div.style.opacity="0%";
	}, "12000");
	setTimeout(() => {
		survived6div.style.display="none";
		survived5.style.bottom="-91%";
		survived6.style.bottom="-185%";
		if (cheated==false) {
			switch (challenge){
				case 0:
					if (currentnight>nighthighscore) {
						nighthighscore=currentnight;
					}
					if (flashlightcheckbox.checked) {
						document.cookie = "cookieFlash" + currentnight + "=true; path=/";
					}
					if (mirrorcheckbox.checked) {
						document.cookie = "cookieMirror" + currentnight + "=true; path=/";
					}
					currentnight++;
					document.cookie = `currentnight=${currentnight}; path=/`;
					document.cookie = `nighthighscore=${nighthighscore}; path=/`;
					break;
				case 1:
					if (currentnightch1>nighthighscorech1) {
						nighthighscorech1=currentnightch1;
					}
					if (flashlightcheckbox.checked) {
						document.cookie = "ch1cookieFlash" + currentnightch1 + "=true; path=/";
					}
					if (mirrorcheckbox.checked) {
						document.cookie = "ch1cookieMirror" + currentnightch1 + "=true; path=/";
					}
					currentnightch1++;
					document.cookie = `currentnightch1=${currentnightch1}; path=/`;
					document.cookie = `nighthighscorech1=${nighthighscorech1}; path=/`;
					break;
				case 2:
					if (currentnightch2>nighthighscorech2) {
						nighthighscorech2=currentnightch2;
					}
					if (flashlightcheckbox.checked) {
						document.cookie = "ch2cookieFlash" + currentnightch2 + "=true; path=/";
					}
					if (mirrorcheckbox.checked) {
						document.cookie = "ch2cookieMirror" + currentnightch2 + "=true; path=/";
					}
					currentnightch2++;
					document.cookie = `currentnightch2=${currentnightch2}; path=/`;
					document.cookie = `nighthighscorech2=${nighthighscorech2}; path=/`;
					break;
				case 3:
					if (currentnightch3>nighthighscorech3) {
						nighthighscorech3=currentnightch3;
					}
					if (flashlightcheckbox.checked) {
						document.cookie = "ch3cookieFlash" + currentnightch3 + "=true; path=/";
					}
					if (mirrorcheckbox.checked) {
						document.cookie = "ch3cookieMirror" + currentnightch3 + "=true; path=/";
					}
					currentnightch3++;
					document.cookie = `currentnightch3=${currentnightch3}; path=/`;
					document.cookie = `nighthighscorech3=${nighthighscorech3}; path=/`;
					break;
			}
		}
		if (currentnight<4 && currentnight>=2 && cheated==false && challenge==0 || currentnightch1<4 && currentnightch1>=2 && cheated==false && challenge==1 || currentnightch2<4 && currentnightch2>=2 && cheated==false && challenge==2 || currentnightch3<4 && currentnightch3>=2 && cheated==false && challenge==3) {
			switch (challenge){
				case 0:
					daystart(currentnight);
					break;
				case 1:
					daystart(currentnightch1);
					break;
				case 2:
					daystart(currentnightch2);
					break;
				case 3:
					daystart(currentnightch3);
					break;
			}
			
		}else{
			fadewarning(1000);
		}
	}, "16000");
}

let audioContext;
let analyserNode;
let playingSources = [];
let globalVolume = 0.5;

if (getCookie("volumecookie") !== undefined) {
	globalVolume=getCookie("volumecookie");
	audioslider.value=globalVolume;
	audiopercent.innerHTML=Math.trunc(globalVolume*100)+"%";
}

function initializeVisuals() {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    analyserNode = audioContext.createAnalyser();
    analyserNode.fftSize = 256;
  }
}

function playSound(soundUrl, loop) {
  if (!audioContext || !analyserNode) {
    initializeVisuals();
  }

  const audioElement = new Audio();
  audioElement.src = "sfx/" + soundUrl + ".wav";
  audioElement.loop = loop;

  const source = audioContext.createMediaElementSource(audioElement);
  source.connect(analyserNode);
  analyserNode.connect(audioContext.destination);

  if (loop) {
    const gainNode = audioContext.createGain();
    source.connect(gainNode);
    gainNode.connect(analyserNode);
    gainNode.gain.value = globalVolume;
  }

  audioElement.addEventListener('ended', function () {
  	const endedSrc = this.src.split('/').pop();
    const index = playingSources.findIndex(item => item.audioElement === audioElement);

    if (index !== -1) {
      playingSources[index].source.disconnect();
      audioElement.pause();
      playingSources.splice(index, 1);
    }

    if (endedSrc === '1VO.wav' || endedSrc === '2VO.wav' || endedSrc === '3VO.wav' || 
      endedSrc === '4VO.wav' || endedSrc === '5VO.wav' || endedSrc === '6VO.wav' || 
      endedSrc === '7VO.wav' || endedSrc === '8VO.wav') {
    	mutecall.style.display="none";
  	}
  });

  audioElement.volume = globalVolume;
  audioElement.play();

  playingSources.push({ source, audioElement });
}


function stopSound() {
  for (const { source, audioElement } of playingSources) {
    source.disconnect();
    audioElement.pause();
  }
  playingSources = [];

  if (audioContext) {
    audioContext.close();
    audioContext = null;
    analyserNode = null;
  }
}

function changeVolume(soundUrl, volume) {
  for (const { audioElement } of playingSources) {
    if (audioElement.src.endsWith(soundUrl + ".wav")) {
      audioElement.volume = volume * globalVolume;
      if (volume === 0) {
        const index = playingSources.findIndex(item => item.audioElement === audioElement);
        if (index !== -1) {
          playingSources[index].source.disconnect();
          audioElement.pause();
          playingSources.splice(index, 1);
        }
      }
    }
  }
}

function getAudioData() {
  const bufferLength = analyserNode.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);
  analyserNode.getByteFrequencyData(dataArray);
  return dataArray;
}

function setGlobalVolume(volume) {
  globalVolume = volume;
  for (const { audioElement } of playingSources) {
    audioElement.volume = volume;
  }
}




function updateUsage(){
	switch (usagenum){
		case 1:
			usage2.style.display="none";
			usage3.style.display="none";
			usage4.style.display="none";
			break;
		case 2:
			usage2.style.display="block";
			usage3.style.display="none";
			usage4.style.display="none";
			break;
		case 3:
			usage2.style.display="block";
			usage3.style.display="block";
			usage4.style.display="none";
			break;
		case 4:
			usage2.style.display="block";
			usage3.style.display="block";
			usage4.style.display="block";
			break;
	}
}

function windKiz(){
	if (pressbool==false) {
		if (currentnight<5 && challenge==0 || currentnightch1<5 && challenge==1 || currentnightch2<5 && challenge==2 || currentnightch3<5 && challenge==3) {
			switch (challenge){
				case 0:
					windnumb=windnumb-0.1-((currentnight-2)*0.05);
					break;
				case 1:
					windnumb=windnumb-0.1-((currentnightch1-2)*0.05);
					break;
				case 2:
					windnumb=windnumb-0.1-((currentnightch2-2)*0.05);
					break;
				case 3:
					windnumb=windnumb-0.1-((currentnightch3-2)*0.05);
					break;
			}
		}else{
			switch (challenge){
				case 0:
					windnumb=windnumb-0.2-currentnight*0.01;
					break;
				case 1:
					windnumb=windnumb-0.2-currentnightch1*0.01;
					break;
				case 2:
					windnumb=windnumb-0.2-currentnightch2*0.01;
					break;
				case 3:
					windnumb=windnumb-0.2-currentnightch3*0.01;
					break;
			}
		}
	}
}

function pizzaPress(press){
	if (event.button === 0) {
		pressbool = press;
		if (press==true && windnumb>0 && windingbool==false) {
			windingbool=true;
			if (navigator.userAgent.indexOf("Firefox") !== -1) {
				pizzainterval = setInterval(windButton, 10);
			}else{
				pizzainterval = setInterval(windButton, 1);
			}
			playSound("windup2",true);
		}else{
			clearInterval(pizzainterval);
			windingbool=false;
			pizzabtn.src="img/camera/pizzabtn.png";
			changeVolume("windup2",0);
			if (press==true && windnumb<=0) {
				playSound("error",false);
			}
		}
	}
}

function windButton(){
	if (navigator.userAgent.indexOf("Firefox") !== -1) {
		if (windnumb<99 && currentnight<5 && challenge==0 || windnumb<99 && currentnightch1<5 && challenge==1 || windnumb<99 && currentnightch2<5 && challenge==2 || windnumb<99 && currentnightch3<5 && challenge==3) {
			windnumb=windnumb+0.017*10;
		}else{
			if (windnumb<99) {
				switch (challenge){
					case 0:
						windnumb=windnumb+(0.017+(currentnight-4)*0.002)*10;
						break;
					case 1:
						windnumb=windnumb+(0.017+(currentnightch1-4)*0.002)*10;
						break;
					case 2:
						windnumb=windnumb+(0.017+(currentnightch2-4)*0.002)*10;
						break;
					case 3:
						windnumb=windnumb+(0.017+(currentnightch3-4)*0.002)*10;
						break;
				}
			}
		}
	}else{
		if (windnumb<99 && currentnight<5 && challenge==0 || windnumb<99 && currentnightch1<5 && challenge==1 || windnumb<99 && currentnightch2<5 && challenge==2 || windnumb<99 && currentnightch3<5 && challenge==3) {
			windnumb=windnumb+0.017;
		}else{
			if (windnumb<99) {
				switch (challenge){
					case 0:
						windnumb=windnumb+0.017+(currentnight-4)*0.002;
						break;
					case 1:
						windnumb=windnumb+0.017+(currentnightch1-4)*0.002;
						break;
					case 2:
						windnumb=windnumb+0.017+(currentnightch2-4)*0.002;
						break;
					case 3:
						windnumb=windnumb+0.017+(currentnightch3-4)*0.002;
						break;
				}
			}
		}
	}
	
	pizzabtn.src="img/camera/pizzabtnon.png";
}

function spawnowo(){
	var x=1;
	var y;
	var z;
	if (owotoggle==false && currenttime<4800) {
		x=Math.floor(Math.random() * 150);
		if (x==0 || forceowo==true) {
			y = Math.floor(Math.random()*40000)+10000;
			z = Math.floor(Math.random()*1000)+15000;
			owotoggle=true;
			owo.style.display="block";
			playSound("ariamath",false);
			glowinterval = setInterval(() => {
				const dataArray = getAudioData();
  				const average = dataArray.reduce((acc, value) => acc + value, 0) / dataArray.length;
  				const shadowStrength = (average / 255) * 15;
				
  				owo.style.filter = `drop-shadow(0 0 ${shadowStrength}vh cyan)`;
			}, 10);
			const timeout16 = setTimeout(() => {
				if (currenttime<4800) {
					owo.style.display="none";
					clearInterval(glowinterval);
					stopSound();
					playSound("Buzz_Fan_Florescent2",false);
					if (Math.trunc(currenttime/800)>3 && currentnight==3 && challenge==0) {
						playSound("fire",true);
					}
				}
			}, y);
			timeouts.push(timeout16);
			const timeout22 = setTimeout(() => {
				if (currenttime<4800) {
					owo.style.display="block";
				}
			}, y+100);
			timeouts.push(timeout22);
			const timeout23 = setTimeout(() => {
				if (currenttime<4800) {
					office.style.display="none";
					owo.style.display="none";
					changeVolume("Buzz_Fan_Florescent2",0.01);
				}
			}, y+200);
			timeouts.push(timeout23);
			const timeout17 = setTimeout(() => {
				if (currenttime<4800) {
					owo.style.display="block";
				}
			}, y+250);
			timeouts.push(timeout17);
			const timeout18 = setTimeout(() => {
				if (currenttime<4800) {
					owo.style.display="none";
					office.style.display="block";
					changeVolume("Buzz_Fan_Florescent2",1);
				}
			}, y+320);
			timeouts.push(timeout18);
			const timeout19 = setTimeout(() => {
				if (currenttime<4800) {
					office.style.display="none";
					fire.style.display="none";
					changeVolume("fire",0);
					changeVolume("Buzz_Fan_Florescent2",0);
					officemovetrigger1.style.display="none";
					officemovetrigger11.style.display="none";
					officemovetrigger111.style.display="none";
					officemovetrigger2.style.display="none";
					officemovetrigger22.style.display="none";
					officemovetrigger222.style.display="none";
					buttontrigger1.style.display="none";
					lighttrigger1.style.display="none";
					buttontrigger2.style.display="none";
					lighttrigger2.style.display="none";
					freddyboop.style.display="none";
					camchar.style.display="none";
				}
			}, y+400);
			timeouts.push(timeout19);
			const timeout20 = setTimeout(() => {
				if (currenttime<4800) {
					playSound("deep steps",false);
				}
			}, y+1400);
			timeouts.push(timeout20);
			const timeout21 = setTimeout(() => {
				if (currenttime<4800) {
					stopSound();
					jumpscare.style.display="block";
					jumpscare.src="img/background/ryanjump.gif";
					playSound("squeak",false);
					clearInterval(tickinterval);
					clearInterval(timerinterval);
					timerinterval = null;
					if (currentnight>=1 && currentnight<=3 && challenge==0 || cheated==true) {
						fadewarning(1000);
					}else{
						showtimerdeath(1000);
					}
				}
			}, y+400+z);
			timeouts.push(timeout21);
			setTimeout(() => {
				jumpscare.style.display="none";
				jumpscare.src="";
			}, y+1400+z);
		}
	}
}

function kitchenSound(){
	var x = Math.floor(Math.random() * 4);
		switch (x){
			case 0:
				playSound("OVEN-DRA_1_GEN-HDF18119",false);
				setTimeout(() => {
					kitchendelay=false;
				}, 7000);
				break;
			case 1:
				playSound("OVEN-DRA_2_GEN-HDF18120",false);
				setTimeout(() => {
					kitchendelay=false;
				}, 5000);
				break;
			case 2:
				playSound("OVEN-DRA_7_GEN-HDF18121",false);
				setTimeout(() => {
					kitchendelay=false;
				}, 10000);
				break;
			case 3:
				playSound("OVEN-DRAWE_GEN-HDF18122",false);
				setTimeout(() => {
					kitchendelay=false;
				}, 5000);
				break;
		}
}

function lightBrk(side){
	if (side=="left") {
		lightbreakleft--;
	}else{
		lightbreakright--;
	}
	if (lightbreakleft==0) {
		light1.checked=false;
		usagenum--;
		lightbreakleft=-1;
		playSound("changebulb",false);
		setTimeout(() => {
			changeVolume("BallastHumMedium2",0);
			playSound("fall",false);
		}, 800);
		setTimeout(() => {
			lampleft.style.top="94%";
		}, 1000);
		setTimeout(() => {
			officelights1.style.display="none";
			ryanoffice.style.visibility="none";
			playSound("break",false);
		}, 1300);
	}
	if (lightbreakright==0) {
		light2.checked=false;
		usagenum--;
		lightbreakright=-1;
		playSound("changebulb",false);
		setTimeout(() => {
			changeVolume("BallastHumMedium2",0);
			playSound("fall",false);
		}, 800);
		setTimeout(() => {
			lampright.style.top="94%";
		}, 1000);
		setTimeout(() => {
			officelights2.style.display="none";
			joeyoffice.style.visibility="none";
			playSound("break",false);
		}, 1300);
	}
}

function changeofficesrc(){
	officebg.src="img/background/office.png";
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office_flicker.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 2000);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 2200);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office_flicker.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 2300);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 2400);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office_flicker.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 3400);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 3900);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office_flicker.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 6900);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 7000);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office_flicker.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 7100);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 7200);
	timeoutID = setTimeout(() => {
		officebg.src="img/background/office.png";
		if (officerepeatsrc=="beans") {
			officebg.src="img/background/office2.png";
		}
	}, 7700);
	timeoutID = setTimeout(() => {
		officerepeatsrc=true;
		if (officerepeatsrc=="beans") {
			officerepeatsrc="beans";
			officebg.src="img/background/office2.png";
		}
	}, 9700);
}

function kizzydeath(){
	if (kizdeathtoggle==false && currenttime<4800 && power>0) {
		kizdeathtoggle=true;
		slug.style.display="none";
		lightbreakright=-1;
		lightbreakleft=-1;
		light2.checked=false;
		light1.checked=false;
		usagenum--;
		stopSound();
		rightlight.src="img/buttons/rightlight.png";
		leftlight.src="img/buttons/Leftlight.png";
		officelights1.style.display="none";
		officelights2.style.display="none";
		camerassets.style.display="none";
		slug.style.display="none";
		cam.style.visibility="hidden";
		character1.style.visibility="hidden";
		character2.style.visibility="hidden";
		character3.style.visibility="hidden";
		officemovetrigger1.style.display="none";
		officemovetrigger11.style.display="none";
		officemovetrigger111.style.display="none";
		officemovetrigger2.style.display="none";
		officemovetrigger22.style.display="none";
		officemovetrigger222.style.display="none";
		buttontrigger1.style.display="none";
		lighttrigger1.style.display="none";
		buttontrigger2.style.display="none";
		lighttrigger2.style.display="none";
		freddyboop.style.display="none";
		for(i = 0; i < lines.length; i++) {
  		  lines[i].style.visibility="hidden";
  		}
		cameratrigger.style.display="none";
		camerabutton.style.display="none";
		if (camera.checked) {
			playSound("put down",false);
			camerabg.src="img/monitorclose.gif";
			camera.checked = false;
			setTimeout(() => {
			  camerabg.style.visibility="hidden";
			}, "220");
		}
		setTimeout(() => {
		  jumpscare.style.display="block";
			jumpscare.src="img/background/kizjump.gif";
			playSound("goop",false);
			playSound("goop2",false);
			clearInterval(tickinterval);
			clearInterval(timerinterval);
			timerinterval = null;
			if (currentnight>=1 && currentnight<=3 && challenge==0 || cheated==true) {
				fadewarning(4000);
			}else{
				showtimerdeath(4000);
			}
		}, "1000");
		setTimeout(() => {
			stopSound();
		}, "4900");
		setTimeout(() => {
			game.style.display="none";
			jumpscare.style.display="none";
			jumpscare.src="";
		}, "5100");
	}
}

function ryanMove(){
	var x = Math.floor(Math.random() * 3);
	if (currentnight<5 && challenge==0 || currentnightch1<5 && challenge==1 || currentnightch2<5 && challenge==2 || currentnightch3<5 && challenge==3) {
		switch (challenge) {
		    case 0:
		        var y1=60000-currentnight*4000;
				var y2=10000-currentnight*2000;
				var z = Math.floor(Math.random() * (40000-currentnight*2000))+(10000-currentnight*1000);
		        break;
		    case 1:
		        var y1=60000-currentnightch1*4000;
				var y2=10000-currentnightch1*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch1*2000))+(10000-currentnightch1*1000);
		        break;
		    case 2:
		        var y1=60000-currentnightch2*4000;
				var y2=10000-currentnightch2*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch2*2000))+(10000-currentnightch2*1000);
		        break;
		    case 3:
		        var y1=60000-currentnightch3*4000;
				var y2=10000-currentnightch3*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch3*2000))+(10000-currentnightch3*1000);
		        break;
		    default:
		        break;
		}
	}else{
		switch (challenge) {
		    case 0:
		        var y1=40000-currentnight*200;
				var y2=2000-currentnight*100;
				var z = Math.floor(Math.random() * (32000-currentnight*200))+(5000-currentnight*100);
		        break;
		    case 1:
		        var y1=40000-currentnightch1*200;
				var y2=2000-currentnightch1*100;
				var z = Math.floor(Math.random() * (32000-currentnightch1*200))+(5000-currentnightch1*100);
		        break;
		    case 2:
		        var y1=40000-currentnightch2*200;
				var y2=2000-currentnightch2*100;
				var z = Math.floor(Math.random() * (32000-currentnightch2*200))+(5000-currentnightch2*100);
		        break;
		    case 3:
		        var y1=40000-currentnightch3*200;
				var y2=2000-currentnightch3*100;
				var z = Math.floor(Math.random() * (32000-currentnightch3*200))+(5000-currentnightch3*100);
		        break;
		    default:
		        break;
		}
	}
	if (y1<0) {
		y1=0;
	}
	if (y2<0) {
		y2=0;
	}
	if (z<0) {
		z=0;
	}
	var y = Math.floor(Math.random() * y1)+y2;
	switch(character1cam){
		case "1b":
			if (challenge==0 || challenge==1) {
				if (x==2) {
					const timeout0 = setTimeout(() => {
						character1cam="6";
						if (currentcam==character1cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						radarryan.style.left="34%";
						radarryan.style.bottom="624%";
						ryanMove();
					}, y);
					timeouts.push(timeout0);
				}else{
					const timeout1 = setTimeout(() => {
						character1cam="5";
						if (currentcam==character1cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						character1.style.left="9%";
						character1.style.top="13%";
						character1.style.width="33%";
						character1.style.transform = "rotate(0deg)";
						radarryan.style.left="4%";
						radarryan.style.bottom="578%";
						ryanMove();
					}, y);
					timeouts.push(timeout1);
				}
			}else{
				x = Math.floor(Math.random() * 6);
				if (x>=4) {
					const timeout0 = setTimeout(() => {
						character1cam="6";
						if (currentcam==character1cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						radarryan.style.left="34%";
						radarryan.style.bottom="624%";
						ryanMove();
					}, y);
					timeouts.push(timeout0);
				}else{
					if (x<=2) {
						const timeout1 = setTimeout(() => {
							character1cam="5";
							if (currentcam==character1cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
								changecam(currentcam);
							}
							character1.style.left="9%";
							character1.style.top="13%";
							character1.style.width="33%";
							character1.style.transform = "rotate(0deg)";
							radarryan.style.left="4%";
							radarryan.style.bottom="578%";
							ryanMove();
						}, y);
						timeouts.push(timeout1);
					}else{
						const timeout30 = setTimeout(() => {
							character1cam="milk";
							if (currentcam==character1cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
								changecam(currentcam);
							}
							changeVolume("gen",0);
							if (ledcolor=="transparent") {
								playSound("genend",false);
							}
							if (currentcam=="milk" && camera.checked==true) {
								changeVolume("genend",1);
							}else{
								changeVolume("genend",0.01);
							}
							clearTimeout(timeout28);
							clearTimeout(timeout29);
							clearTimeout(timeout34);
							clearTimeout(timeout35);
							clearTimeout(timeout36);
							milkbtn1.style.opacity="10%";
							milkbtn2.style.opacity="10%";
							milkbtn3.style.opacity="10%";
							milkbtn4.style.opacity="10%";
							milkbtn1.removeAttribute("onclick");
							milkbtn2.removeAttribute("onclick");
							milkbtn3.removeAttribute("onclick");
							milkbtn4.removeAttribute("onclick");
							led.style.backgroundColor="transparent";
							led.style.animation="ledglowtransparent 1s ease-in-out infinite alternate";
							ledcolor="nothing";
							character1.style.left="-17%";
							character1.style.top="13%";
							character1.style.width="33%";
							character1.style.transform = "rotate(0deg)";
							radarryan.style.left="10.5%";
							radarryan.style.bottom="624%";
							ryanMove();
						}, y);
						timeouts.push(timeout30);
					}
				}
			}
			break;
		case "6":
			const timeout2 = setTimeout(() => {
				character1cam="1b";
				if (currentcam==character1cam && camera.checked==true || currentcam=="6" && camera.checked==true) {
					changecam(currentcam);
				}
				character1.style.left="34%";
				character1.style.top="13%";
				character1.style.width="33%";
				character1.style.transform = "rotate(0deg)";
				radarryan.style.left="18%";
				radarryan.style.bottom="579%";
				ryanMove();
			}, y);
			timeouts.push(timeout2);
			break;
		case "5":
			if (x==2) {
				const timeout3 = setTimeout(() => {
					character1cam="1b";
					if (currentcam==character1cam && camera.checked==true || currentcam=="5" && camera.checked==true) {
						changecam(currentcam);
					}
					character1.style.left="34%";
					character1.style.top="13%";
					character1.style.width="33%";
					character1.style.transform = "rotate(0deg)";
					radarryan.style.left="18%";
					radarryan.style.bottom="579%";
					ryanMove();
				}, y);
				timeouts.push(timeout3);
			}else{
				const timeout4 = setTimeout(() => {
					character1cam="1c";
					if (currentcam==character1cam && camera.checked==true || currentcam=="5" && camera.checked==true) {
						changecam(currentcam);
					}
					character1.style.left="16%";
					character1.style.top="-191%";
					character1.style.width="79%";
					character1.style.transform = "rotate(21deg)";
					radarryan.style.left="9%";
					radarryan.style.bottom="530%";
					ryanMove();
				}, y);
				timeouts.push(timeout4);
			}
			break;
		case "1c":
			const timeout5 = setTimeout(() => {
				character1cam="office";
				if (currentcam=="1c" && camera.checked==true) {
					changecam(currentcam);
				}
				ryanoffice.style.display="block";
				radarryan.style.left="15%";
				radarryan.style.bottom="530%";
				if (light1.checked && windowleft==false) {
					playSound("windowscare",false);
					windowleft=true;
				}
			}, y);
			timeouts.push(timeout5);
			const timeout6 = setTimeout(() => {
				ryanoffice.style.display="none";
				if (door1.checked==true) {
					character1cam="1b";
					character1.style.left="34%";
					character1.style.top="13%";
					character1.style.width="33%";
					character1.style.transform = "rotate(0deg)";
					radarryan.style.left="18%";
					radarryan.style.bottom="579%";
					windowleft=false;
					ryanMove();
				}else{
					deathdelay=true;
					changeVolume("BallastHumMedium2",0);
					officelights1.style.display="none";
					officelights2.style.display="none";
					if (camera.checked==false && power>0) {
						playSound("enter",false);
					}
					radarryan.style.left="-9999%";
					radarryan.style.bottom="530%";
				}
			}, y+z);
			timeouts.push(timeout6);
			break;
		case "milk":
			timeout32 = setTimeout(() => {
				character1cam="1b";
				if (currentcam==character1cam && camera.checked==true || currentcam=="milk" && camera.checked==true) {
					changecam(currentcam);
				}
				if (character2cam!="milk") {
					var failtime2 = Math.floor(Math.random() * 11000) + 4000;
					timeout35 = setTimeout(() => {
						ledrando();
					}, failtime2);
					timeouts.push(timeout35);
				}
				led.style.backgroundColor="transparent";
				led.style.animation="ledglowtransparent 1s ease-in-out infinite alternate";
				character1.style.left="34%";
				character1.style.top="13%";
				character1.style.width="33%";
				character1.style.transform = "rotate(0deg)";
				radarryan.style.left="18%";
				radarryan.style.bottom="579%";
				ryanMove();
			}, y);
			timeouts.push(timeout32);
			break;
	}
}

function joeyMove(){
	var x = Math.floor(Math.random() * 3);
	if (currentnight<5 && challenge==0 || currentnightch1<5 && challenge==1 || currentnightch2<5 && challenge==2 || currentnightch3<5 && challenge==3) {
		switch (challenge) {
		    case 0:
		        var y1=60000-currentnight*4000;
				var y2=10000-currentnight*2000;
				var z = Math.floor(Math.random() * (40000-currentnight*2000))+(10000-currentnight*1000);
		        break;
		    case 1:
		        var y1=60000-currentnightch1*4000;
				var y2=10000-currentnightch1*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch1*2000))+(10000-currentnightch1*1000);
		        break;
		    case 2:
		        var y1=60000-currentnightch2*4000;
				var y2=10000-currentnightch2*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch2*2000))+(10000-currentnightch2*1000);
		        break;
		    case 3:
		        var y1=60000-currentnightch3*4000;
				var y2=10000-currentnightch3*2000;
				var z = Math.floor(Math.random() * (40000-currentnightch3*2000))+(10000-currentnightch3*1000);
		        break;
		    default:
		        break;
		}
	}else{
		switch (challenge) {
		    case 0:
		        var y1=40000-currentnight*100;
				var y2=2000-currentnight*50;
				var z = Math.floor(Math.random() * (32000-currentnight*100))+(5000-currentnight*50);
		        break;
		    case 1:
		        var y1=40000-currentnightch1*100;
				var y2=2000-currentnightch1*50;
				var z = Math.floor(Math.random() * (32000-currentnightch1*100))+(5000-currentnightch1*50);
		        break;
		    case 2:
		        var y1=40000-currentnightch2*100;
				var y2=2000-currentnightch2*50;
				var z = Math.floor(Math.random() * (32000-currentnightch2*100))+(5000-currentnightch2*50);
		        break;
		    case 3:
		        var y1=40000-currentnightch3*100;
				var y2=2000-currentnightch3*50;
				var z = Math.floor(Math.random() * (32000-currentnightch3*100))+(5000-currentnightch3*50);
		        break;
		    default:
		        break;
		}
	}
	if (y1<0) {
		y1=0;
	}
	if (y2<0) {
		y2=0;
	}
	if (z<0) {
		z=0;
	}
	var y = Math.floor(Math.random() * y1)+y2;
	switch(character2cam){
		case "1b":
			if (challenge==0 || challenge==1) {
				if (x<2) {
					const timeout7 = setTimeout(() => {
						character2cam="6";
						if (currentcam==character2cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						radarjoey.style.left="38%";
						radarjoey.style.bottom="624%";
						joeyMove();
					}, y);
					timeouts.push(timeout7);
				}else{
					const timeout8 = setTimeout(() => {
						character2cam="5";
						if (currentcam==character2cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						character2.style.left="76%";
						character2.style.top="17%";
						character2.style.width="29%";
						character2.style.transform = "rotate(0deg)";
						radarjoey.style.left="6%";
						radarjoey.style.bottom="592%";
						joeyMove();
					}, y);
					timeouts.push(timeout8);
				}
			}else{
				x = Math.floor(Math.random() * 6);
				if (x<=2) {
					const timeout7 = setTimeout(() => {
						character2cam="6";
						if (currentcam==character2cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
							changecam(currentcam);
						}
						radarjoey.style.left="38%";
						radarjoey.style.bottom="624%";
						joeyMove();
					}, y);
					timeouts.push(timeout7);
				}else{
					if (x>=4) {
						const timeout8 = setTimeout(() => {
							character2cam="5";
							if (currentcam==character2cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
								changecam(currentcam);
							}
							character2.style.left="76%";
							character2.style.top="17%";
							character2.style.width="29%";
							character2.style.transform = "rotate(0deg)";
							radarjoey.style.left="6%";
							radarjoey.style.bottom="592%";
							joeyMove();
						}, y);
						timeouts.push(timeout8);
					}else{
						const timeout31 = setTimeout(() => {
							character2cam="milk";
							if (currentcam==character2cam && camera.checked==true || currentcam=="1b" && camera.checked==true) {
								changecam(currentcam);
							}
							changeVolume("gen",0);
							if (ledcolor=="transparent") {
								playSound("genend",false);
							}
							if (currentcam=="milk" && camera.checked==true) {
								changeVolume("genend",1);
							}else{
								changeVolume("genend",0.01);
							}
							clearTimeout(timeout28);
							clearTimeout(timeout29);
							clearTimeout(timeout34);
							clearTimeout(timeout35);
							clearTimeout(timeout36);
							milkbtn1.style.opacity="10%";
							milkbtn2.style.opacity="10%";
							milkbtn3.style.opacity="10%";
							milkbtn4.style.opacity="10%";
							milkbtn1.removeAttribute("onclick");
							milkbtn2.removeAttribute("onclick");
							milkbtn3.removeAttribute("onclick");
							milkbtn4.removeAttribute("onclick");
							led.style.backgroundColor="transparent";
							led.style.animation="ledglowtransparent 1s ease-in-out infinite alternate";
							ledcolor="nothing";
							character2.style.left="90%";
							character2.style.top="33%";
							character2.style.width="31%";
							character2.style.transform = "rotate(0deg)";
							radarjoey.style.left="10.5%";
							radarjoey.style.bottom="644%";
							joeyMove();
						}, y);
						timeouts.push(timeout31);
					}
					
				}
			}
			break;
		case "6":
			if (x<2) {
				const timeout9 = setTimeout(() => {
					character2cam="1b";
					if (currentcam==character2cam && camera.checked==true || currentcam=="6" && camera.checked==true) {
						changecam(currentcam);
					}
					character2.style.left="68%";
					character2.style.top="33%";
					character2.style.width="31%";
					character2.style.transform = "rotate(0deg)";
					radarjoey.style.left="22%";
					radarjoey.style.bottom="579%";
					joeyMove();
				}, y);
				timeouts.push(timeout9);
			}else{
				const timeout10 = setTimeout(() => {
					character2cam="office";
					if (currentcam=="6" && camera.checked==true) {
						changecam(currentcam);
					}
					joeyoffice.style.display="block";
					radarjoey.style.left="25%";
					radarjoey.style.bottom="530%";
					if (light2.checked && windowright==false) {
						playSound("windowscare",false);
						windowright=true;
					}
				}, y);
				timeouts.push(timeout10);
				const timeout11 = setTimeout(() => {
					joeyoffice.style.display="none";
					if (door2.checked==true) {
						character2cam="1b";
						character2.style.left="68%";
						character2.style.top="33%";
						character2.style.width="31%";
						character2.style.transform = "rotate(0deg)";
						radarjoey.style.left="22%";
						radarjoey.style.bottom="579%";
						joeyMove();
						windowright=false;
					}else{
						deathdelay=true;
						changeVolume("BallastHumMedium2",0);
						officelights1.style.display="none";
						officelights2.style.display="none";
						if (camera.checked==false && power>0) {
							playSound("enter",false);
						}
						radarjoey.style.left="-9999%";
						radarjoey.style.bottom="530%";
					}
				}, y+z);
				timeouts.push(timeout11);
				}
			break;
		case "5":
			const timeout12 = setTimeout(() => {
				character2cam="1b";
				if (currentcam==character2cam && camera.checked==true || currentcam=="5" && camera.checked==true) {
					changecam(currentcam);
				}
				character2.style.left="68%";
				character2.style.top="33%";
				character2.style.width="31%";
				character2.style.transform = "rotate(0deg)";
				radarjoey.style.left="22%";
				radarjoey.style.bottom="579%";
				joeyMove();
			}, y);
			timeouts.push(timeout12);
			break;
		case "milk":
			timeout33 = setTimeout(() => {
				character2cam="1b";
				if (currentcam==character2cam && camera.checked==true || currentcam=="milk" && camera.checked==true) {
					changecam(currentcam);
				}
				if (character1cam!="milk") {
					var failtime3 = Math.floor(Math.random() * 11000) + 4000;
					timeout36 = setTimeout(() => {
						ledrando();
					}, failtime3);
				}
				timeouts.push(timeout36);
				character2.style.left="68%";
				character2.style.top="33%";
				character2.style.width="31%";
				character2.style.transform = "rotate(0deg)";
				radarjoey.style.left="22%";
				radarjoey.style.bottom="579%";
				joeyMove();
			}, y);
			timeouts.push(timeout33);
			break;
	}
}

function furrydeath(){
	if (deathdelay==true && currenttime<4800 && power>0) {
		kizdeathtoggle=true;
		deathdelay=false;
		stopSound();
		jumpscare.style.display="block";
		if (character1cam=="office") {
			jumpscare.src="img/background/ryanjump.gif";
		}else{
			jumpscare.src="img/background/joeyjump.gif";
		}
		playSound("squeak",false);
		clearInterval(tickinterval);
		clearInterval(timerinterval);
		timerinterval = null;
		if (currentnight>=1 && currentnight<=3 && challenge==0 || cheated==true) {
			fadewarning(1000);
		}else{
			showtimerdeath(1000);
		}
		setTimeout(() => {
			game.style.display="none";
			jumpscare.style.display="none";
			jumpscare.src="";
		}, 1000);
	}
}

function upTimer() {
    ++miliseconds;
    if (camera.checked) {
    	++camtime;
    	switch (true){
			case (450<=camtime && 600>camtime):
				cameraConsumption=cameraConsumption+0.002;
				usage3.style.display="block";
				break;
			case (600<=camtime):
				cameraConsumption=cameraConsumption+0.01;
				usage3.style.display="block";
				usage4.style.display="block";
				break;
		}
    }else{
    	camtime=0;
    	cameraConsumption = 0.02;
    }
    
    var seconds = Math.floor((miliseconds / 10) % 60);
    var minutes = Math.floor(miliseconds / 600);

    if (minutes >= 1) {
        seconds = Math.floor((miliseconds / 10) % 60);
        minutes = Math.floor((miliseconds / 600) % 60);
    }

    exacttime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
    crnttime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
}

function mute(){
	changeVolume("1VO",0);
	changeVolume("2VO",0);
	changeVolume("3VO",0);
	changeVolume("4VO",0);
	changeVolume("5VO",0);
	changeVolume("6VO",0);
	changeVolume("7VO",0);
	changeVolume("8VO",0);
	mutecall.style.display="none";
}

function increasenight(side){
	continuetime.style.display="none";
	continueflash.style.display="none";
    continuemirror.style.display="none";
    switch (challenge) {
	    case 0:
	        if (side==1) {
				currentnight++;
			}else{
				currentnight--;
			}
	        break;
	    case 1:
	        if (side==1) {
				currentnightch1++;
			}else{
				currentnightch1--;
			}
	        break;
	    case 2:
	        if (side==1) {
				currentnightch2++;
			}else{
				currentnightch2--;
			}
	        break;
	    case 3:
	        if (side==1) {
				currentnightch3++;
			}else{
				currentnightch3--;
			}
	        break;
	    default:
	        break;
	}
	if (challenge==0) {
            	if (nighthighscore>=3 && getCookie("timernight"+currentnight) !== undefined && currentnight!=3 && currentnight!=2 && currentnight!=1) {
            	    var miliseconds = getCookie("timernight"+currentnight);
            	    var seconds = Math.floor((miliseconds / 10) % 60);
            	    var minutes = Math.floor(miliseconds / 600);
	
            	    if (minutes >= 1) {
            	        seconds = Math.floor((miliseconds / 10) % 60);
            	        minutes = Math.floor((miliseconds / 600) % 60);
            	    }
	
            	    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            	    continuetime.style.display="block";
            	    cookieNameMirror = "cookieMirror" + currentnight;
					cookieNameFlash = "cookieFlash" + currentnight;
            	    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            	    	continueflash.style.left="20%";
            	    	continueflash.style.display="block";
            	    	continuemirror.style.left="18%";
            	    	continuemirror.style.display="block";
            	    }else{
            	    	if (getCookie(cookieNameFlash) !== undefined) {
            	    		continueflash.style.left="18%";
            	    		continueflash.style.display="block";
            	    		continuemirror.style.display="none";
            	    	}else{
            	    		if (getCookie(cookieNameMirror) !== undefined) {
            	    			continuemirror.style.left="18%";
            	    			continuemirror.style.display="block";
            	    			continueflash.style.display="none";
            	    		}
            	    	}
            	    }
            	}
            }else{
            	if (challenge==1) {
            		if (getCookie("ch1timernight"+currentnightch1) !== undefined) {
            		    var miliseconds = getCookie("ch1timernight"+currentnightch1);
            		    var seconds = Math.floor((miliseconds / 10) % 60);
            		    var minutes = Math.floor(miliseconds / 600);
		
            		    if (minutes >= 1) {
            		        seconds = Math.floor((miliseconds / 10) % 60);
            		        minutes = Math.floor((miliseconds / 600) % 60);
            		    }
		
            		    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            		    continuetime.style.display="block";
            		    cookieNameMirror = "ch1cookieMirror" + currentnightch1;
						cookieNameFlash = "ch1cookieFlash" + currentnightch1;
            		    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            		    	continueflash.style.left="20%";
            		    	continueflash.style.display="block";
            		    	continuemirror.style.left="18%";
            		    	continuemirror.style.display="block";
            		    }else{
            		    	if (getCookie(cookieNameFlash) !== undefined) {
            		    		continueflash.style.left="18%";
            		    		continueflash.style.display="block";
            		    		continuemirror.style.display="none";
            		    	}else{
            		    		if (getCookie(cookieNameMirror) !== undefined) {
            		    			continuemirror.style.left="18%";
            		    			continuemirror.style.display="block";
            		    			continueflash.style.display="none";
            		    		}
            		    	}
            		    }
            		}
            	}else{
            		if (challenge==2) {
            			if (getCookie("ch2timernight"+currentnightch2) !== undefined) {
            			    var miliseconds = getCookie("ch2timernight"+currentnightch2);
            			    var seconds = Math.floor((miliseconds / 10) % 60);
            			    var minutes = Math.floor(miliseconds / 600);
			
            			    if (minutes >= 1) {
            			        seconds = Math.floor((miliseconds / 10) % 60);
            			        minutes = Math.floor((miliseconds / 600) % 60);
            			    }
			
            			    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            			    continuetime.style.display="block";
            			    cookieNameMirror = "ch2cookieMirror" + currentnightch2;
							cookieNameFlash = "ch2cookieFlash" + currentnightch2;
            			    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            			    	continueflash.style.left="20%";
            			    	continueflash.style.display="block";
            			    	continuemirror.style.left="18%";
            			    	continuemirror.style.display="block";
            			    }else{
            			    	if (getCookie(cookieNameFlash) !== undefined) {
            			    		continueflash.style.left="18%";
            			    		continueflash.style.display="block";
            			    		continuemirror.style.display="none";
            			    	}else{
            			    		if (getCookie(cookieNameMirror) !== undefined) {
            			    			continuemirror.style.left="18%";
            			    			continuemirror.style.display="block";
            			    			continueflash.style.display="none";
            			    		}
            			    	}
            			    }
            			}
            		}else{
            			if (challenge==3) {
            				if (getCookie("ch3timernight"+currentnightch3) !== undefined) {
            				    var miliseconds = getCookie("ch3timernight"+currentnightch3);
            				    var seconds = Math.floor((miliseconds / 10) % 60);
            				    var minutes = Math.floor(miliseconds / 600);
				
            				    if (minutes >= 1) {
            				        seconds = Math.floor((miliseconds / 10) % 60);
            				        minutes = Math.floor((miliseconds / 600) % 60);
            				    }
				
            				    continuetime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (miliseconds % 10);
            				    continuetime.style.display="block";
            				    cookieNameMirror = "ch3cookieMirror" + currentnightch3;
								cookieNameFlash = "ch3cookieFlash" + currentnightch3;
            				    if (getCookie(cookieNameFlash) !== undefined && getCookie(cookieNameMirror) !== undefined) {
            				    	continueflash.style.left="20%";
            				    	continueflash.style.display="block";
            				    	continuemirror.style.left="18%";
            				    	continuemirror.style.display="block";
            				    }else{
            				    	if (getCookie(cookieNameFlash) !== undefined) {
            				    		continueflash.style.left="18%";
            				    		continueflash.style.display="block";
            				    		continuemirror.style.display="none";
            				    	}else{
            				    		if (getCookie(cookieNameMirror) !== undefined) {
            				    			continuemirror.style.left="18%";
            				    			continuemirror.style.display="block";
            				    			continueflash.style.display="none";
            				    		}
            				    	}
            				    }
            				}
            			}
            		}
            	}
            }
    switch (challenge) {
	    case 0:
	        continuenight.innerHTML="Night " + currentnight;
	        break;
	    case 1:
	        continuenight.innerHTML="Night " + currentnightch1;
	        break;
	    case 2:
	        continuenight.innerHTML="Night " + currentnightch2;
	        break;
	    case 3:
	        continuenight.innerHTML="Night " + currentnightch3;
	        break;
	    default:
	        break;
	}
}

function kizvisual() {
	switch (true){
		case (76<=Math.ceil(windnumb) && kizstate!=1):
			kizstate=1;
			if (currentcam=="5" && camera.checked==true && pizzadelay==10) {
				changecam("5");
				pizzadelay=0;
			}
			character3.src="img/camera/box_frame_1.png";
			radarkizzy.style.backgroundColor="#00FF00";
			break;
		case (51<=Math.ceil(windnumb) && 76>Math.ceil(windnumb) && kizstate!=2):
			kizstate=2;
			if (currentcam=="5" && camera.checked==true && pizzadelay==10) {
				changecam("5");
				pizzadelay=0;
			}
			character3.src="img/camera/box_frame_2.png";
			radarkizzy.style.backgroundColor="#807F00";
			break;
		case (26<=Math.ceil(windnumb) && 51>Math.ceil(windnumb) && kizstate!=3):
			kizstate=3;
			if (currentcam=="5" && camera.checked==true && pizzadelay==10) {
				changecam("5");
				pizzadelay=0;
			}
			character3.src="img/camera/box_frame_3.png";
			radarkizzy.style.backgroundColor="#BF4000";
			break;
		case (26>Math.ceil(windnumb) && 0<Math.ceil(windnumb) && kizstate!=4):
			kizstate=4;
			if (currentcam=="5" && camera.checked==true && pizzadelay==10) {
				changecam("5");
				pizzadelay=0;
			}
			character3.src="img/camera/box_frame_4.png";
			radarkizzy.style.backgroundColor="#FF0000";
			break;
		case (0>=Math.ceil(windnumb) && power>0 && currenttime<4800 && kizstate!=5):
			kizstate=5;
			if (currentcam=="5" && camera.checked==true && pizzadelay==10) {
				changecam("5");
				pizzadelay=0;
			}
			windnumb=-1000;
			character3.src="img/camera/box_frame_5.png";
			radarkizzy.style.backgroundColor = "rgba(0, 0, 0, 0)";
			changeVolume("CrumblingDreams",0);
			playSound("jackinthebox",false);
			const timeout15 = setTimeout(() => {
				kizzydeath();
			}, 18000);
			timeouts.push(timeout15);
			break;
	}
}

function showtimerdeath(timerout){
	setTimeout(() => {
		switch (challenge) {
		    case 0:
		        cookieName = "timernight" + currentnight;
				if (getCookie("timernight"+currentnight) !== undefined) {
					var tempcookie = getCookie("timernight"+currentnight);
					var seconds = Math.floor((tempcookie / 10) % 60);
    				var minutes = Math.floor(tempcookie / 600);
				
    				if (minutes >= 1) {
    				    seconds = Math.floor((tempcookie / 10) % 60);
    				    minutes = Math.floor((tempcookie / 600) % 60);
    				}
    				prevtime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (tempcookie % 10);
    				prevtime.style.display="block";
    				if (getCookie("timernight"+currentnight)<miliseconds) {
    					crnttimedesc.innerHTML="You got a new best time of:";
    					prevtimedesc.innerHTML="Your previous time was:";
    					menucharacter2.src="img/menu/boykisszaza.gif";
    					menucharacter2.style.top="-4%";
    					menucharacter2.style.left="30%";
    					menucharacter2.style.width="80%";
    				}else{
    					crnttimedesc.innerHTML="You got a time of:";
    					prevtimedesc.innerHTML="Your best time is:";
    					menucharacter2.src="img/menu/boykissthigh.gif";
    					menucharacter2.style.top="24%";
    					menucharacter2.style.left="0%";
    					menucharacter2.style.width="52%";
    				}
					prevtimedesc.style.display="block";
				}
				if (getCookie("timernight"+currentnight) === undefined) {
					menucharacter2.src="img/menu/boykissthigh.gif";
					menucharacter2.style.top="24%";
    				menucharacter2.style.left="0%";
    				menucharacter2.style.width="52%";
					prevtime.style.display="none";
					prevtimedesc.style.display="none";
				}
				if (getCookie("timernight"+currentnight) !== undefined && getCookie("timernight"+currentnight)<miliseconds || getCookie("timernight"+currentnight) === undefined) {
					document.cookie = cookieName + "=" + miliseconds + "; path=/";
				}
		        break;
		    case 1:
		        cookieName = "ch1timernight" + currentnightch1;
				if (getCookie("ch1timernight"+currentnightch1) !== undefined) {
					var tempcookie = getCookie("ch1timernight"+currentnightch1);
					var seconds = Math.floor((tempcookie / 10) % 60);
    				var minutes = Math.floor(tempcookie / 600);
				
    				if (minutes >= 1) {
    				    seconds = Math.floor((tempcookie / 10) % 60);
    				    minutes = Math.floor((tempcookie / 600) % 60);
    				}
    				prevtime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (tempcookie % 10);
    				prevtime.style.display="block";
    				if (getCookie("ch1timernight"+currentnightch1)<miliseconds) {
    					crnttimedesc.innerHTML="You got a new best time of:";
    					prevtimedesc.innerHTML="Your previous time was:";
    					menucharacter2.src="img/menu/boykisszaza.gif";
    					menucharacter2.style.top="-4%";
    					menucharacter2.style.left="30%";
    					menucharacter2.style.width="80%";
    				}else{
    					crnttimedesc.innerHTML="You got a time of:";
    					prevtimedesc.innerHTML="Your best time is:";
    					menucharacter2.src="img/menu/boykissthigh.gif";
    					menucharacter2.style.top="24%";
    					menucharacter2.style.left="0%";
    					menucharacter2.style.width="52%";
    				}
					prevtimedesc.style.display="block";
				}
				if (getCookie("ch1timernight"+currentnightch1) === undefined) {
					menucharacter2.src="img/menu/boykissthigh.gif";
					menucharacter2.style.top="24%";
    				menucharacter2.style.left="0%";
    				menucharacter2.style.width="52%";
					prevtime.style.display="none";
					prevtimedesc.style.display="none";
				}
				if (getCookie("ch1timernight"+currentnightch1) !== undefined && getCookie("ch1timernight"+currentnightch1)<miliseconds || getCookie("ch1timernight"+currentnightch1) === undefined) {
					document.cookie = cookieName + "=" + miliseconds + "; path=/";
				}
		        break;
		    case 2:
		        cookieName = "ch2timernight" + currentnightch2;
				if (getCookie("ch2timernight"+currentnightch2) !== undefined) {
					var tempcookie = getCookie("ch2timernight"+currentnightch2);
					var seconds = Math.floor((tempcookie / 10) % 60);
    				var minutes = Math.floor(tempcookie / 600);
				
    				if (minutes >= 1) {
    				    seconds = Math.floor((tempcookie / 10) % 60);
    				    minutes = Math.floor((tempcookie / 600) % 60);
    				}
    				prevtime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (tempcookie % 10);
    				prevtime.style.display="block";
    				if (getCookie("ch2timernight"+currentnightch2)<miliseconds) {
    					crnttimedesc.innerHTML="You got a new best time of:";
    					prevtimedesc.innerHTML="Your previous time was:";
    					menucharacter2.src="img/menu/boykisszaza.gif";
    					menucharacter2.style.top="-4%";
    					menucharacter2.style.left="30%";
    					menucharacter2.style.width="80%";
    				}else{
    					crnttimedesc.innerHTML="You got a time of:";
    					prevtimedesc.innerHTML="Your best time is:";
    					menucharacter2.src="img/menu/boykissthigh.gif";
    					menucharacter2.style.top="24%";
    					menucharacter2.style.left="0%";
    					menucharacter2.style.width="52%";
    				}
					prevtimedesc.style.display="block";
				}
				if (getCookie("ch2timernight"+currentnightch2) === undefined) {
					menucharacter2.src="img/menu/boykissthigh.gif";
					menucharacter2.style.top="24%";
    				menucharacter2.style.left="0%";
    				menucharacter2.style.width="52%";
					prevtime.style.display="none";
					prevtimedesc.style.display="none";
				}
				if (getCookie("ch2timernight"+currentnightch2) !== undefined && getCookie("ch2timernight"+currentnightch2)<miliseconds || getCookie("ch2timernight"+currentnightch2) === undefined) {
					document.cookie = cookieName + "=" + miliseconds + "; path=/";
				}
		        break;
		    case 3:
		        cookieName = "ch3timernight" + currentnightch3;
				if (getCookie("ch3timernight"+currentnightch3) !== undefined) {
					var tempcookie = getCookie("ch3timernight"+currentnightch3);
					var seconds = Math.floor((tempcookie / 10) % 60);
    				var minutes = Math.floor(tempcookie / 600);
				
    				if (minutes >= 1) {
    				    seconds = Math.floor((tempcookie / 10) % 60);
    				    minutes = Math.floor((tempcookie / 600) % 60);
    				}
    				prevtime.innerHTML = minutes + ":" + (seconds < 10 ? "0" : "") + seconds + ":" + (tempcookie % 10);
    				prevtime.style.display="block";
    				if (getCookie("ch3timernight"+currentnightch3)<miliseconds) {
    					crnttimedesc.innerHTML="You got a new best time of:";
    					prevtimedesc.innerHTML="Your previous time was:";
    					menucharacter2.src="img/menu/boykisszaza.gif";
    					menucharacter2.style.top="-4%";
    					menucharacter2.style.left="30%";
    					menucharacter2.style.width="80%";
    				}else{
    					crnttimedesc.innerHTML="You got a time of:";
    					prevtimedesc.innerHTML="Your best time is:";
    					menucharacter2.src="img/menu/boykissthigh.gif";
    					menucharacter2.style.top="24%";
    					menucharacter2.style.left="0%";
    					menucharacter2.style.width="52%";
    				}
					prevtimedesc.style.display="block";
				}
				if (getCookie("ch3timernight"+currentnightch3) === undefined) {
					menucharacter2.src="img/menu/boykissthigh.gif";
					menucharacter2.style.top="24%";
    				menucharacter2.style.left="0%";
    				menucharacter2.style.width="52%";
					prevtime.style.display="none";
					prevtimedesc.style.display="none";
				}
				if (getCookie("ch3timernight"+currentnightch3) !== undefined && getCookie("ch3timernight"+currentnightch3)<miliseconds || getCookie("ch3timernight"+currentnightch3) === undefined) {
					document.cookie = cookieName + "=" + miliseconds + "; path=/";
				}
		        break;
		    default:
		        break;
		}
		timescore.style.display = "block";
		playSound("item",false);
	}, timerout+100);
	setTimeout(() => {
		timescore.style.opacity = "0%";
		fadewarning(3000);
	}, timerout+6500);
}

let isRKeyPressed = false;

document.addEventListener('keydown', function(event) {
    if (event.key === 'r') {
        isRKeyPressed = true;
    }
});

document.addEventListener('keyup', function(event) {
    if (event.key === 'r') {
        isRKeyPressed = false;
    }
});

function restartNight(){
	if (isRKeyPressed) {
		for (var i = 0; i < timeouts.length; i++) {
        	clearTimeout(timeouts[i]);
    	}
		game.style.display="none";
		clearInterval(tickinterval);
		clearInterval(timerinterval);
		timerinterval = null;
		stopSound();
		switch (challenge) {
		    case 0:
		        daystart(currentnight);
		        break;
		    case 1:
		        daystart(currentnightch1);
		        break;
		    case 2:
		        daystart(currentnightch2);
		        break;
		    case 3:
		        daystart(currentnightch3);
		        break;
		    default:
		        break;
		}
	}
}

function optionsmenu(active){
	playSound("blip3",false);
	menucharacter.style.display="block";
	if (active==0) {
		options.setAttribute("onclick", "optionsmenu(1);");
		options.setAttribute("onmouseover", "selectmenu(4);");
		select.style.bottom="7%";
        select.style.left="79%";
		newgame.style.display="none";
		title.style.display="none";
		titlemode.style.display="none";
		continuemenu.style.display="none";
		menucharacter.src="img/menu/boykisscomputer.gif";
		starpng.style.display="none";
		starnumber.style.display="none";
		starpng1.style.display="none";
		starnumber1.style.display="none";
		starpng2.style.display="none";
		starnumber2.style.display="none";
		starpng3.style.display="none";
		starnumber3.style.display="none";
		continuewarning.style.display="none";
		continuewarningmsg.style.display="none";
		optionscontents.style.display="block";
		options.innerHTML="Main Menu";
		extras.innerHTML="Extras";
		extras.setAttribute("onclick", "extrasmenu(0);");
		extras.setAttribute("onmouseover", "selectmenu(6);");
		extrascontents.style.display="none";
	}else{
		options.innerHTML="Options";
		options.setAttribute("onclick", "optionsmenu(0);");
		options.setAttribute("onmouseover", "selectmenu(2);");
		select.style.bottom="7%";
        select.style.left="83%";
		optionscontents.style.display="none";
		newgame.style.display="block";
		title.style.display="block";
		titlemode.style.display="block";
		continuemenu.style.display="block";
		switch (challenge) {
		    case 0:
		        menucharacter.src = "img/menu/FNaFFreddy_Menu.gif";
		        titlemode.innerHTML="";
		        menutitlemode.innerHTML="";
		        break;
		    case 1:
		        menucharacter.src = "img/menu/boykissblind.gif";
		        titlemode.innerHTML="Blind Mode";
		        titlemode.style.animation="glowingch1 1.5s infinite";
		        menutitlemode.innerHTML="Blind Mode";
		        menutitlemode.style.animation="glowingch1 1.5s infinite";
		        break;
		    case 2:
		        menucharacter.src = "img/menu/boykissmilk.gif";
		        titlemode.innerHTML="Milk Mode";
		        titlemode.style.animation="glowingch2 1.5s infinite";
		        menutitlemode.innerHTML="Milk Mode";
		        menutitlemode.style.animation="glowingch2 1.5s infinite";
		        break;
		    case 3:
		        menucharacter.src = "img/menu/boykissblindmilk.gif";
		        titlemode.innerHTML="Blind Milk Mode";
		        titlemode.style.animation="glowingch3 1.5s infinite";
		        menutitlemode.innerHTML="Blind Milk Mode";
		        menutitlemode.style.animation="glowingch3 1.5s infinite";
		        break;
		    default:
		        break;
		}
		if (nighthighscore>=3) {
  			starpng.style.display="block";
  			if (nighthighscore>=4) {
  				starnumber.style.display="block";
  				starnumber.innerHTML=nighthighscore;
  			}
  			if (nighthighscorech1>=3) {
  				starpng1.style.display="block";
  			}
  			if (nighthighscorech1>=4) {
  				starnumber1.style.display="block";
  				starnumber1.innerHTML=nighthighscorech1;
  			}
  			if (nighthighscorech2>=3) {
  				starpng2.style.display="block";
  			}
  			if (nighthighscorech2>=4) {
  				starnumber2.style.display="block";
  				starnumber2.innerHTML=nighthighscorech2;
  			}
  			if (nighthighscorech3>=3) {
  				starpng3.style.display="block";
  			}
  			if (nighthighscorech3>=4) {
  				starnumber3.style.display="block";
  				starnumber3.innerHTML=nighthighscorech3;
  			}
  			if (cheated==true) {
  				continuewarning.style.display="block";
  				continuewarningmsg.style.display="block";
  			}else{
  				continuewarning.style.display="none";
  				continuewarningmsg.style.display="none";
  			}
  		}
	}
	
}

function sendMessageToParent() {
    window.parent.postMessage("executeFunction", "*");
}

audioslider.addEventListener('input', function() {
    updateValue(this.value);
});

function updateValue(value) {
    globalVolume = parseFloat(value);
    audiopercent.innerHTML=Math.trunc(globalVolume*100)+"%";	
    if (globalVolume>0) {
    	changeVolume("darkness_music",globalVolume);
    	changeVolume("static",globalVolume);
    }else{
    	changeVolume("darkness_music",0.00001);
    	changeVolume("static",0.00001);
    }
    document.cookie = `volumecookie=${globalVolume}; path=/`;
}

function extrasmenu(active){
	playSound("blip3",false);
	if (active==0) {
		extrasdevmenu.style.display="none";
		extrascreditsmenu.style.display="none";
		extrascheatsmenu.style.display="none";
		extraschallengemenu.style.display="none";
		extras.setAttribute("onclick", "extrasmenu(1);");
		extras.setAttribute("onmouseover", "selectmenu(7);");
		select.style.bottom="13%";
        select.style.left="79%";
		newgame.style.display="none";
		title.style.display="none";
		titlemode.style.display="none";
		continuemenu.style.display="none";
		menucharacter.src="img/menu/boykissphone.gif";
		starpng.style.display="none";
		starnumber.style.display="none";
		starpng1.style.display="none";
		starnumber1.style.display="none";
		starpng2.style.display="none";
		starnumber2.style.display="none";
		starpng3.style.display="none";
		starnumber3.style.display="none";
		continuewarning.style.display="none";
		continuewarningmsg.style.display="none";
		extrascontents.style.display="block";
		extras.innerHTML="Main Menu";
		options.innerHTML="Options";
		options.setAttribute("onclick", "optionsmenu(0);");
		options.setAttribute("onmouseover", "selectmenu(2);");
		optionscontents.style.display="none";
		if (nighthighscore<4) {
			extraslock.style.display="block";
			extraslockmsg.style.display="block";
		}
	}else{
		extras.innerHTML="Extras";
		extras.setAttribute("onclick", "extrasmenu(0);");
		extras.setAttribute("onmouseover", "selectmenu(6);");
		select.style.bottom="13%";
        select.style.left="84%";
		extrascontents.style.display="none";
		newgame.style.display="block";
		title.style.display="block";
		titlemode.style.display="block";
		continuemenu.style.display="block";
		switch (challenge) {
		    case 0:
		        menucharacter.src = "img/menu/FNaFFreddy_Menu.gif";
		        titlemode.innerHTML="";
		        menutitlemode.innerHTML="";
		        break;
		    case 1:
		        menucharacter.src = "img/menu/boykissblind.gif";
		        titlemode.innerHTML="Blind Mode";
		        titlemode.style.animation="glowingch1 1.5s infinite";
		        menutitlemode.innerHTML="Blind Mode";
		        menutitlemode.style.animation="glowingch1 1.5s infinite";
		        break;
		    case 2:
		        menucharacter.src = "img/menu/boykissmilk.gif";
		        titlemode.innerHTML="Milk Mode";
		        titlemode.style.animation="glowingch2 1.5s infinite";
		        menutitlemode.innerHTML="Milk Mode";
		        menutitlemode.style.animation="glowingch2 1.5s infinite";
		        break;
		    case 3:
		        menucharacter.src = "img/menu/boykissblindmilk.gif";
		        titlemode.innerHTML="Blind Milk Mode";
		        titlemode.style.animation="glowingch3 1.5s infinite";
		        menutitlemode.innerHTML="Blind Milk Mode";
		        menutitlemode.style.animation="glowingch3 1.5s infinite";
		        break;
		    default:
		        break;
		}
		menucharacter.style.display="block";
		if (nighthighscore>=3) {
  			starpng.style.display="block";
  			if (nighthighscore>=4) {
  				starnumber.style.display="block";
  				starnumber.innerHTML=nighthighscore;
  			}
  			if (nighthighscorech1>=3) {
  				starpng1.style.display="block";
  			}
  			if (nighthighscorech1>=4) {
  				starnumber1.style.display="block";
  				starnumber1.innerHTML=nighthighscorech1;
  			}
  			if (nighthighscorech2>=3) {
  				starpng2.style.display="block";
  			}
  			if (nighthighscorech2>=4) {
  				starnumber2.style.display="block";
  				starnumber2.innerHTML=nighthighscorech2;
  			}
  			if (nighthighscorech3>=3) {
  				starpng3.style.display="block";
  			}
  			if (nighthighscorech3>=4) {
  				starnumber3.style.display="block";
  				starnumber3.innerHTML=nighthighscorech3;
  			}
  			if (cheated==true) {
  				continuewarning.style.display="block";
  				continuewarningmsg.style.display="block";
  			}else{
  				continuewarning.style.display="none";
  				continuewarningmsg.style.display="none";
  			}
  		}
	}
}

function exrtrasdev() {
	playSound("blip3",false);
	menucharacter.style.display="none";
	extrascreditsmenu.style.display="none";
	extrasdevmenu.style.display="block";
	extrascheatsmenu.style.display="none";
	extraschallengemenu.style.display="none";
}

const mediaList = [
  { type: "vid", value: "First Power Test with Lights And Doors" },
  { type: "vid", value: "First Power Out Test" },
  { type: "vid", value: "First Camera Test" },
  { type: "vid", value: "Menu Screen Implementation" },
  { type: "vid", value: "Addition of Nights" },
  { type: "vid", value: "Sound effects and Music added (warning: loud)" },
  { type: "vid", value: "Usage Meter added (ignore background music lol)" },
  { type: "img", value: "First screenshot of Ryan" },
  { type: "img", value: "First iteration of the Dining Area" },
  { type: "img", value: "Early version of Cam 01" },
  { type: "img", value: "Later version of Cam 01" },
  { type: "img", value: "Mockup of Cam 03" },
  { type: "img", value: "First version of Pizza Cove (No Pizza Box yet)" },
  { type: "vid", value: "Kizzy implemented" },
  { type: "img", value: "CEO VA, Game Artist, Boykisser Joey (Magical Blueberries)" },
  { type: "vid", value: "OwO Implemented" },
  { type: "img", value: "Cut concept for Doors" },
  { type: "img", value: "Early version of the Finished Map" },
  { type: "img", value: "Can't make a game without bugs!" },
  { type: "img", value: "The office" },
  { type: "vid", value: "Added light breaking mechanic" },
  { type: "vid", value: "Boop!" },
  { type: "vid", value: "Kizzy Jumpscare" },
  { type: "img", value: "Added Joey as an Animatronic" },
  { type: "img", value: "Near finished Title Screen" }
];

function increasedev(side){
	leftextrasbtn.style.display="block";
	rightextrasbtn.style.display="block";
	devvid.pause();
	if (side==0) {
		currentdevimg--;
	}else{
		currentdevimg++;
	}
	if (currentdevimg==1) {
		leftextrasbtn.style.display="none";
	}else{
		if (currentdevimg==25) {
			rightextrasbtn.style.display="none";
		}
	}
	if(mediaList[currentdevimg-1].type=="vid"){
		devimg.style.display="none";
		devvid.style.display="block";
		devvidsource.src="img/menu/dev/"+currentdevimg+".mp4";
		devvid.load();
	}else{
		devimg.style.display="block";
		devvid.style.display="none";
		devimg.src="img/menu/dev/"+currentdevimg+".png";
	}
	devdescription.innerHTML=mediaList[currentdevimg-1].value;
}

function exrtrascred(){
	playSound("blip3",false);
	menucharacter.style.display="none";
	extrascreditsmenu.style.display="block";
	extrasdevmenu.style.display="none";
	extrascheatsmenu.style.display="none";
	extraschallengemenu.style.display="none";
}

function exrtraschet(){
	playSound("blip3",false);
	menucharacter.style.display="none";
	extrascreditsmenu.style.display="none";
	extrasdevmenu.style.display="none";
	extrascheatsmenu.style.display="block";
	extraschallengemenu.style.display="none";
}

function togglemirror(){
	playSound("blip3",false);
	if (mirrorcheckbox.checked) {
		window.parent.postMessage("mirrorit", "*");
	}else{
		window.parent.postMessage("unmirrorit", "*");
	}
}

function toggleinfinitepower(){
	playSound("blip3",false);
	if (powercheckbox.checked) {
		cheated=1;
		powercheat=true;
	}else{
		if (radarcheckbox.checked) {
			cheated=1;
		}else{
			cheated=0;
		}
		powercheat=false;
	}
}

function toggleflashlightbtn(){
	playSound("blip3",false);
	if (flashlightcheckbox.checked) {
		flashlight.style.display="block";
	}else{
		flashlight.style.display="none";
		flashlighton=true;
	}
}

function toggleradar(){
	playSound("blip3",false);
	if (radarcheckbox.checked) {
		radarassets.style.display="block";
		cheated=1;
	}else{
		if (powercheckbox.checked) {
			cheated=1;
		}else{
			cheated=0;
		}
		radarassets.style.display="none";
	}
}

document.addEventListener('mousemove', (e) => {
  let x = e.clientX - (document.documentElement.clientWidth * 1.5);
  let y = e.clientY - (document.documentElement.clientHeight * 1.5);
  flashlight.style.transform = 'translate(' + x + 'px, ' + y + 'px)';
})

document.addEventListener('click', function(event) {
    if (flashlightcheckbox.checked) {
    	if (flashlighton) {
    		playSound("Flashlight_Off",false);
    		flashlighton=false;
    		flashlight.style.backgroundImage = 'radial-gradient(circle at center, transparent, #000 10%)';
    	}else{
			playSound("Flashlight_On",false);
    		flashlighton=true;
    		flashlight.style.backgroundImage = 'radial-gradient(circle at center, transparent, #000 20%)';
    	}
    }
});

function warningmessage(state){
	if (state) {
		playSound("blip3",false);
		continuewarningmsg.style.opacity="100%";
	}else{
		continuewarningmsg.style.opacity="0%";
	}
	
}

function lockmessage(state){
	if (state) {
		playSound("blip3",false);
		extraslockmsg.style.opacity="100%";
	}else{
		extraslockmsg.style.opacity="0%";
	}
}

function exrtraschalleng() {
	if (nighthighscore>=4) {
		playSound("blip3",false);
		extraschallengemenu.style.display="block";
		menucharacter.style.display="none";
		extrascreditsmenu.style.display="none";
		extrasdevmenu.style.display="none";
		extrascheatsmenu.style.display="none";
		if (nighthighscorech2>=3) {
			extrasmilklock.style.display="none";
			extrasmilklockmsg.style.display="none";
			blindcheckbox.disabled = false;
		}
	}
}

function lockmilkmessage(state){
	if (state) {
		playSound("blip3",false);
		extrasmilklockmsg.style.opacity="100%";
	}else{
		extrasmilklockmsg.style.opacity="0%";
	}
}

function togglechallenge(tyo) {
	playSound("blip3",false);

	if (tyo=="blind" && nighthighscorech1<3) {
		milkcheckbox.checked=false;
	}
	if (tyo=="milk" && nighthighscorech1<3) {
		blindcheckbox.checked=false;
	}
	if (blindcheckbox.checked && milkcheckbox.checked==false) {
		challenge=1;
	}else{
		if (blindcheckbox.checked==false && milkcheckbox.checked) {
			challenge=2;
		}else{
			if (blindcheckbox.checked && milkcheckbox.checked) {
				challenge=3;
			}else{
				challenge=0;
			}
		}
	}
	switch (challenge) {
	    case 0:
	        continuemenu.setAttribute("onclick", "startnight(currentnight);");
	        break;
	    case 1:
	        continuemenu.setAttribute("onclick", "startnight(currentnightch1);");
	        break;
	    case 2:
	        continuemenu.setAttribute("onclick", "startnight(currentnightch2);");
	        break;
	    case 3:
	        continuemenu.setAttribute("onclick", "startnight(currentnightch3);");
	        break;
	    default:
	        break;
	}
}

blindcheckbox.checked=false;
milkcheckbox.checked=false;
radarcheckbox.checked=false;
powercheckbox.checked=false;
flashlightcheckbox.checked=false;
mirrorcheckbox.checked=false;

function ledrando(){
	const colors = ["red", "blue", "green", "purple"];

	for (let i = colors.length - 1; i > 0; i--) {
	  const j = Math.floor(Math.random() * (i + 1));
	  [colors[i], colors[j]] = [colors[j], colors[i]];
	}

	led.style.backgroundColor=colors[0];
	led.style.animation="ledglow"+colors[0]+" 1s ease-in-out infinite alternate";
	ledcolor=colors[0];
	if (currentcam=="milk" && camera.checked==true) {
		playSound("ding",false);
	}
	milkbtn1.style.opacity="50%";
	milkbtn2.style.opacity="50%";
	milkbtn3.style.opacity="50%";
	milkbtn4.style.opacity="50%";
	milkbtn1.setAttribute("onclick", "clickledbutton('red');playSound('mlkbtn',false);");
	milkbtn2.setAttribute("onclick", "clickledbutton('green');playSound('mlkbtn',false);");
	milkbtn3.setAttribute("onclick", "clickledbutton('blue');playSound('mlkbtn',false);");
	milkbtn4.setAttribute("onclick", "clickledbutton('purple');playSound('mlkbtn',false);");
}

function clickledbutton(colormlk){
	milkbtn1.style.opacity="10%";
	milkbtn2.style.opacity="10%";
	milkbtn3.style.opacity="10%";
	milkbtn4.style.opacity="10%";
	milkbtn1.removeAttribute("onclick");
	milkbtn2.removeAttribute("onclick");
	milkbtn3.removeAttribute("onclick");
	milkbtn4.removeAttribute("onclick");
	led.style.backgroundColor="transparent";
	led.style.animation="ledglowtransparent 1s ease-in-out infinite alternate";
	if (colormlk==ledcolor) {
		ledcolor="transparent";
		var timemilk = Math.floor(Math.random() * 50000) + 15000;
		var timemilksub = Math.floor(Math.random() * 25000) + 5000;
		
		while (timemilksub >= timemilk) {
		    timemilksub = Math.floor(Math.random() * 25000) + 4000;
		}
		console.log(timemilk);
		playSound("genstart",false);
		const timeout27 = setTimeout(() => {
			playSound("gen",true);
			if (currentcam=="milk" && camera.checked==true) {
				changeVolume("gen",1);
			}else{
				changeVolume("gen",0.01);
			}
		}, 1000);
		timeouts.push(timeout27);
		timeout28 = setTimeout(() => {
			ledcolor="nothing";
			changeVolume("gen",0);
			playSound("genend",false);
			if (currentcam=="milk" && camera.checked==true) {
				changeVolume("genend",1);
			}else{
				changeVolume("genend",0.01);
			}
		}, timemilk-timemilksub+5000);
		timeouts.push(timeout28);
		timeout29 = setTimeout(() => {
			ledrando();
		}, timemilk);
		timeouts.push(timeout29);
	}else{
		ledcolor="nothing";
		playSound("mlkerror",false);
		var failtime = Math.floor(Math.random() * 11000) + 4000;
		timeout34 = setTimeout(() => {
			ledrando();
		}, failtime);
		timeouts.push(timeout34);
	}
}

function shocking(chara){
	if (chara=="ryan") {
		shockbtn1.style.opacity="10%";
		shockbtn1.removeAttribute("onclick");
		setTimeout(() => {
			shockbtn1.style.opacity="100%";
			shockbtn1.setAttribute("onclick", "shocking('ryan')");
		}, 10000);
	}else{
		shockbtn2.style.opacity="10%";
		shockbtn2.removeAttribute("onclick");
		setTimeout(() => {
			shockbtn2.style.opacity="100%";
			shockbtn2.setAttribute("onclick", "shocking('joey')");
		}, 10000);
	}
	if (chara=="ryan" && character1cam=="milk") {
		playSound("shock",false);
		clearTimeout(timeout32);
		character1cam="1b";
		if (currentcam==character1cam && camera.checked==true || currentcam=="milk" && camera.checked==true) {
			changecam(currentcam);
		}
		if (character2cam!="milk") {
			var failtime2 = Math.floor(Math.random() * 11000) + 4000;
			timeout35 = setTimeout(() => {
				ledrando();
			}, failtime2);
			timeouts.push(timeout35);
		}
		led.style.backgroundColor="transparent";
		led.style.animation="ledglowtransparent 1s ease-in-out infinite alternate";
		character1.style.left="34%";
		character1.style.top="13%";
		character1.style.width="33%";
		character1.style.transform = "rotate(0deg)";
		radarryan.style.left="18%";
		radarryan.style.bottom="579%";
		ryanMove();
	}else{
		if (chara=="joey" && character2cam=="milk") {
			playSound("shock",false);
			clearTimeout(timeout33);
			character2cam="1b";
			if (currentcam==character2cam && camera.checked==true || currentcam=="milk" && camera.checked==true) {
				changecam(currentcam);
			}
			if (character1cam!="milk") {
				var failtime3 = Math.floor(Math.random() * 11000) + 4000;
				timeout36 = setTimeout(() => {
					ledrando();
				}, failtime3);
			}
			timeouts.push(timeout36);
			character2.style.left="68%";
			character2.style.top="33%";
			character2.style.width="31%";
			character2.style.transform = "rotate(0deg)";
			radarjoey.style.left="22%";
			radarjoey.style.bottom="579%";
			joeyMove();
		}else{
			power=power-5;
			playSound("shockfail",false);
		}
	}
}

console.log("ඞ");
console.log("ඞ");